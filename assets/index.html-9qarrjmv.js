import{_ as o,e as l,f as i,g as e,h as a,i as n,j as p,r as h,o as r}from"./app-B14-sJo6.js";const k={};function d(c,t){const s=h("RouteLink");return r(),l("div",null,[t[5]||(t[5]=i("p",null,[a("如果在 NcatBot 之前没有接触过其它涉及网络的编程或者配置, 那么"),i("strong",null,"不应该"),a("使用远端 NapCat 接口. "),i("mark",null,"选择使用远端 NapCat 接口表明你愿意为此付出时间学习或者已经具备相当的基本知识.")],-1)),i("p",null,[n(s,{to:"/notes/guide/5.%20%E6%9D%82%E9%A1%B9/1.%20%E8%AE%A4%E8%AF%86%20NcatBot.html#NcatBot-%E5%92%8C-NapCat-%E7%9A%84%E5%85%B3%E7%B3%BB"},{default:p(()=>t[0]||(t[0]=[a("了解 NapCat 和 NcatBot 的关系")])),_:1}),t[1]||(t[1]=a("."))]),t[6]||(t[6]=e('<p>由于 QQ 风控, 不建议频繁开关 NapCat. 因此有时候需要将 <strong>NapCat</strong> 部署在云服务器上. 一般来说建议一并将 <strong>NcatBot</strong> 也部署在同一台服务器上, 但有时候确实需要分开部署, 此时可以使用远端 NapCat 接口.</p><h2 id="什么时候适合使用远端-napcat-接口" tabindex="-1"><a class="header-anchor" href="#什么时候适合使用远端-napcat-接口"><span>什么时候适合使用远端 NapCat 接口</span></a></h2><ul><li><p>自定义的 NcatBot 功能对性能要求很高, 云服务器无法负担, 但希望 NapCat 能够不间断运行, 不需要每次使用 NcatBot 时都启动 NapCat.</p></li><li><p>具备<strong>基本的网络和操作系统知识</strong>的前提下, 你认为需要使用远端 NapCat 接口的情况.</p></li></ul><h2 id="准备工作" tabindex="-1"><a class="header-anchor" href="#准备工作"><span>准备工作</span></a></h2><p>远端 NapCat 接口一般由云服务器提供, 云服务器的操作系统一般是 Linux, 你需要完成以下操作:</p><ol><li>获取服务器公网 IP.</li><li>开放<strong>系统防火墙</strong>的 3000, 3001, 6099 端口.</li><li>开放<strong>服务商防火墙</strong>的 3000, 3001, 6099 端口.</li></ol>',6)),i("p",null,[t[3]||(t[3]=a("请参考 ")),n(s,{to:"/notes/guide/1.%20%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/1.1%20Linux%20%E5%AE%89%E8%A3%85.html#%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83"},{default:p(()=>t[2]||(t[2]=[a("Linux 安装")])),_:1}),t[4]||(t[4]=a(" 完成 2, 3 步, 服务器公网 IP 请向服务商获取."))]),t[7]||(t[7]=e(`<h2 id="自动配置远端-napcat-服务器-推荐" tabindex="-1"><a class="header-anchor" href="#自动配置远端-napcat-服务器-推荐"><span>自动配置远端 NapCat 服务器(推荐)</span></a></h2><p>在远端正常运行 NcatBot 的示例程序, 下面将其称为<strong>远端引导程序</strong>。</p><p>运行远端引导程序时, 除了改动 <code>bt_uin</code> 和 <code>root</code> 外, 还需将 ==<code>ws_uri</code> 填写为 <code>ws://&lt;服务器公网 IP&gt;:&lt;端口号&gt;</code>，将 <code>ws_listen_ip</code> 填写为 <code>0.0.0.0</code>（监听所有来源的请求）。</p><div class="language-python line-numbers-mode" data-ext="python" data-title="python"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ncatbot</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">core </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> BotClient</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">bot </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> BotClient</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 假设服务器公网 IP 为 123.123.123.123, 你希望在 3001 端口上开启 NapCat 服务。</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">bot</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run_blocking</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">bt_uin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123456</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> root</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">root</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ws_uri</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ws://123.123.123.123:3001</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ws_token</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your_token</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ws_listen_ip</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ncatbot 会进行自动登录的引导, 远端引导程序成功启动并进行测试后, 可以关闭 NcatBot 但<strong>不要关闭 NapCat</strong>.</p><p>接着在本地使用同样的参数运行 Ncatbot 即可。</p><p>建议使用 <code>token</code> 参数确保 NcatBot 和 NapCat 的连接安全。</p><h2 id="手动配置远端-napcat-服务器" tabindex="-1"><a class="header-anchor" href="#手动配置远端-napcat-服务器"><span>手动配置远端 NapCat 服务器</span></a></h2><p>根据 <a href="https://napneko.github.io/" target="_blank" rel="noopener noreferrer">NapCat 文档</a>, 在远端正确配置 NapCat 及其 WebSocket 服务器。</p><p>尤其注意需要 &quot;启用&quot; WebSocket 服务器，以及监听端口的填写应该为 <code>0.0.0.0</code>。</p><p>本地运行 NcatBot, <code>ws_uri</code> 填写为 <code>ws://服务器公网 IP:{你配置时填写的端口}</code>. <code>token</code> 填写为 WebSocket 的 token(注意不是 webui 的 token, WebSocket token 默认为空字符串).</p><h2 id="提醒" tabindex="-1"><a class="header-anchor" href="#提醒"><span>提醒</span></a></h2><ul><li>获取文件时，如果 NapCat 服务器在远端，那么会返回远端服务器的路径。你需要自行对位于远端的文件进行管理。</li></ul>`,13))])}const u=o(k,[["render",d],["__file","index.html.vue"]]),B=JSON.parse('{"path":"/guide/inxart0k/","title":"使用远端 NapCat 接口","lang":"zh-CN","frontmatter":{"title":"使用远端 NapCat 接口","createTime":"2025/02/09 16:45:00","permalink":"/guide/inxart0k/","description":"如果在 NcatBot 之前没有接触过其它涉及网络的编程或者配置, 那么不应该使用远端 NapCat 接口. 选择使用远端 NapCat 接口表明你愿意为此付出时间学习或者已经具备相当的基本知识. . 由于 QQ 风控, 不建议频繁开关 NapCat. 因此有时候需要将 NapCat 部署在云服务器上. 一般来说建议一并将 NcatBot 也部署在同一...","head":[["meta",{"property":"og:url","content":"http://docs.ncatbot.xyz/guide/inxart0k/"}],["meta",{"property":"og:site_name","content":"NcatBot 文档"}],["meta",{"property":"og:title","content":"使用远端 NapCat 接口"}],["meta",{"property":"og:description","content":"如果在 NcatBot 之前没有接触过其它涉及网络的编程或者配置, 那么不应该使用远端 NapCat 接口. 选择使用远端 NapCat 接口表明你愿意为此付出时间学习或者已经具备相当的基本知识. . 由于 QQ 风控, 不建议频繁开关 NapCat. 因此有时候需要将 NapCat 部署在云服务器上. 一般来说建议一并将 NcatBot 也部署在同一..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-23T16:23:09.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-23T16:23:09.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"使用远端 NapCat 接口\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-06-23T16:23:09.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":2.52,"words":756},"git":{"updatedTime":1750695789000,"contributors":[{"name":"liang","username":"liang","email":"2424123787@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/liang?v=4","url":"https://github.com/liang"}]},"autoDesc":true,"filePathRelative":"notes/guide/5. 杂项/2. 使用远端 napcat 接口.md","categoryList":[{"id":"4358b5","sort":10000,"name":"notes"},{"id":"c6d211","sort":10001,"name":"guide"},{"id":"e59377","sort":5,"name":" 杂项"}]}');export{u as comp,B as data};
