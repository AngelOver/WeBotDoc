import{_ as i,e as a,g as e,o as n}from"./app-B14-sJo6.js";const t={};function l(p,s){return n(),a("div",null,s[0]||(s[0]=[e(`<h2 id="私有工作目录" tabindex="-1"><a class="header-anchor" href="#私有工作目录"><span>私有工作目录</span></a></h2><p>在你的代码中, 使用 <code>os.chdir()</code> 函数是<mark>严格禁止</mark>的, 如果你有这个需求, 必须在<strong>上下文管理器</strong>控制的<strong>私有工作目录</strong>中进行.</p><p><code>BasePlugin</code> 提供一个上下文管理器 <code>BasePlugin.work_space</code>, 使用该上下文管理器进入插件私有目录 <code>data/MyPlugin/</code>. 上下文结束时, 会自动修正工作目录.</p><div class="language-python line-numbers-mode" data-ext="python" data-title="python"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> MyPlugin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">BasePlugin</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    name </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MyPlugin</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    version </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> callback</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> event</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Event</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        with</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">work_space</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 此时目录为 data/MyPlugin/</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 可以使用 os.chdir 等函数操作了</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 退出上下文, 目录切换到你不应该知道的位置.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>私有工作目录下的 <code>plugin_name.json</code> 文件用于保存插件可持久化数据, 不应该被占用.</p></div>`,5)]))}const r=i(t,[["render",l],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/guide/prispace/","title":"私有工作目录","lang":"zh-CN","frontmatter":{"title":"私有工作目录","createTime":"2025/03/27 10:07:54","permalink":"/guide/prispace/","description":"私有工作目录 在你的代码中, 使用 os.chdir() 函数是严格禁止的, 如果你有这个需求, 必须在上下文管理器控制的私有工作目录中进行. BasePlugin 提供一个上下文管理器 BasePlugin.work_space, 使用该上下文管理器进入插件私有目录 data/MyPlugin/. 上下文结束时, 会自动修正工作目录. 注意 私有工作...","head":[["meta",{"property":"og:url","content":"http://docs.ncatbot.xyz/guide/prispace/"}],["meta",{"property":"og:site_name","content":"NcatBot 文档"}],["meta",{"property":"og:title","content":"私有工作目录"}],["meta",{"property":"og:description","content":"私有工作目录 在你的代码中, 使用 os.chdir() 函数是严格禁止的, 如果你有这个需求, 必须在上下文管理器控制的私有工作目录中进行. BasePlugin 提供一个上下文管理器 BasePlugin.work_space, 使用该上下文管理器进入插件私有目录 data/MyPlugin/. 上下文结束时, 会自动修正工作目录. 注意 私有工作..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-23T16:23:09.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-23T16:23:09.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"私有工作目录\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-06-23T16:23:09.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":0.66,"words":197},"git":{"updatedTime":1750695789000,"contributors":[{"name":"liang","username":"liang","email":"2424123787@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/liang?v=4","url":"https://github.com/liang"}]},"autoDesc":true,"filePathRelative":"notes/guide/6. 开发 NcatBot 插件/4. 插件高级功能/4.4 私有工作目录.md","categoryList":[{"id":"4358b5","sort":10000,"name":"notes"},{"id":"c6d211","sort":10001,"name":"guide"},{"id":"617ec3","sort":6,"name":" 开发 NcatBot 插件"},{"id":"892c4f","sort":4,"name":" 插件高级功能"}]}');export{r as comp,d as data};
