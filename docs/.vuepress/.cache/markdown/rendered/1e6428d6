{"content":"<p>åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼ˆUser-based Collaborative Filtering, UserCFï¼‰æ˜¯ååŒè¿‡æ»¤ç®—æ³•å®¶æ—ä¸­çš„ç»å…¸æˆå‘˜ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯ <strong>&quot;å‘Šè¯‰æˆ‘ä½ çš„æœ‹å‹æ˜¯è°ï¼Œæˆ‘å°±çŸ¥é“ä½ æ˜¯ä»€ä¹ˆæ ·çš„äºº&quot;</strong>ã€‚é€šè¿‡å¯»æ‰¾å…´è¶£ç›¸ä¼¼çš„ç”¨æˆ·ç¾¤ä½“ï¼Œä¸ºç›®æ ‡ç”¨æˆ·æ¨èå…¶é‚»å±…ç”¨æˆ·å–œæ¬¢ä½†ä»–å°šæœªæ¥è§¦çš„ç‰©å“ã€‚</p>\n<h2 id=\"ğŸ¯-usercfçš„æ ¸å¿ƒæ€æƒ³\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ¯-usercfçš„æ ¸å¿ƒæ€æƒ³\"><span>ğŸ¯ UserCFçš„æ ¸å¿ƒæ€æƒ³</span></a></h2>\n<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">é‚»é‡Œæ•ˆåº”</p>\n<p>UserCFåŸºäºç¤¾ä¼šå­¦ä¸­çš„&quot;é‚»é‡Œæ•ˆåº”&quot;ç†è®ºï¼šç›¸ä¼¼çš„äººå¾€å¾€æœ‰ç›¸ä¼¼çš„è¡Œä¸ºæ¨¡å¼å’Œåå¥½ã€‚</p>\n</div>\n<h3 id=\"ç®—æ³•ç›´è§‰\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ç®—æ³•ç›´è§‰\"><span>ç®—æ³•ç›´è§‰</span></a></h3>\n<p>æƒ³è±¡ä½ åœ¨å¯»æ‰¾ä¸€éƒ¨å¥½ç”µå½±ï¼Œä½ å¯èƒ½ä¼šï¼š</p>\n<ol>\n<li>è¯¢é—®ä¸ä½ å“å‘³ç›¸ä¼¼çš„æœ‹å‹</li>\n<li>å‚è€ƒä»–ä»¬æœ€è¿‘è§‚çœ‹å¹¶æ¨èçš„ç”µå½±</li>\n<li>ä»ä¸­é€‰æ‹©ä½ è¿˜æ²¡çœ‹è¿‡çš„ç”µå½±</li>\n</ol>\n<p>UserCFå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„æ•°å­¦åŒ–å®ç°ï¼</p>\n<h3 id=\"æ•°å­¦è¡¨è¾¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ•°å­¦è¡¨è¾¾\"><span>æ•°å­¦è¡¨è¾¾</span></a></h3>\n<p>ç»™å®šç”¨æˆ·-ç‰©å“è¯„åˆ†çŸ©é˜µ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mrow><mi>m</mi><mo>Ã—</mo><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">R_{m \\times n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8917em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span></span></span></span>ï¼ŒUserCFçš„ç›®æ ‡æ˜¯é¢„æµ‹ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„è¯„åˆ† <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo>=</mo><mover accent=\"true\"><msub><mi>r</mi><mi>u</mi></msub><mo>Ë‰</mo></mover><mo>+</mo><mfrac><mrow><munder><mo>âˆ‘</mo><mrow><mi>v</mi><mo>âˆˆ</mo><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow></munder><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>â‹…</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mrow><mi>v</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo>âˆ’</mo><mover accent=\"true\"><msub><mi>r</mi><mi>v</mi></msub><mo>Ë‰</mo></mover><mo stretchy=\"false\">)</mo></mrow><mrow><munder><mo>âˆ‘</mo><mrow><mi>v</mi><mo>âˆˆ</mo><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow></munder><mi mathvariant=\"normal\">âˆ£</mi><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">âˆ£</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i} = \\bar{r_u} + \\frac{\\sum_{v \\in N_k(u)} sim(u,v) \\cdot (r_{v,i} - \\bar{r_v})}{\\sum_{v \\in N_k(u)} |sim(u,v)|}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7333em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.7754em;vertical-align:-1.1607em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6147em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">âˆ‘</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2253em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">âˆˆ</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3488em;margin-left:-0.109em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1512em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4747em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">âˆ£</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mord\">âˆ£</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.8647em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">âˆ‘</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2253em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">âˆˆ</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3488em;margin-left:-0.109em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1512em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4747em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1607em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼š</p>\n<ul>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mrow><mi>m</mi><mo>Ã—</mo><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">R_{m \\times n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8917em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span> ä¸ªç”¨æˆ·å¯¹ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> ä¸ªç‰©å“çš„è¯„åˆ†çŸ©é˜µ</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯é¢„æµ‹çš„ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><msub><mi>r</mi><mi>u</mi></msub><mo>Ë‰</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\bar{r_u}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7178em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> çš„å¹³å‡è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><msub><mi>r</mi><mi>v</mi></msub><mo>Ë‰</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\bar{r_v}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7178em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> çš„å¹³å‡è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mrow><mi>v</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">r_{v,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„å®é™…è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">N_k(u)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span></span></span></span> æ˜¯ä¸ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> æœ€ç›¸ä¼¼çš„ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ä¸ªç”¨æˆ·é›†åˆ</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å’Œ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> ä¹‹é—´çš„ç›¸ä¼¼åº¦</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">âˆ£</mi><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">âˆ£</mi></mrow><annotation encoding=\"application/x-tex\">|sim(u,v)|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">âˆ£</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mord\">âˆ£</span></span></span></span> è¡¨ç¤ºç›¸ä¼¼åº¦çš„ç»å¯¹å€¼ï¼ˆç”¨äºå½’ä¸€åŒ–ï¼‰</li>\n</ul>\n<h2 id=\"ğŸ“-usercfçš„æ ¸å¿ƒç®—æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“-usercfçš„æ ¸å¿ƒç®—æ³•\"><span>ğŸ“ UserCFçš„æ ¸å¿ƒç®—æ³•</span></a></h2>\n<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">å‚è€ƒååŒè¿‡æ»¤æ€»è§ˆ</p>\n<p>è¯¦ç»†çš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•è¯·å‚è€ƒ <RouteLink to=\"/zh/3.%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95--%E6%AF%94%E4%BD%A0%E6%9B%B4%E6%87%82%E4%BD%A0%E7%9A%84%E8%B4%B4%E5%BF%83%E5%B0%8F%E6%A3%89%E8%A2%84/1.%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95%E7%9A%84%E9%97%A8%E6%B4%BE/2.collaborative_filtering.html#%E7%9B%B8%E4%BC%BC%E5%BA%A6%E5%BA%A6%E9%87%8F%E6%96%B9%E6%B3%95%E8%AF%A6%E7%BB%86%E5%AF%B9%E6%AF%94\">ååŒè¿‡æ»¤æ€»è§ˆ</RouteLink> ä¸­çš„å®Œæ•´å¯¹æ¯”åˆ†æã€‚</p>\n</div>\n<p>UserCFçš„å…³é”®åœ¨äºå‡†ç¡®è®¡ç®—ç”¨æˆ·é—´ç›¸ä¼¼åº¦ï¼Œæ¨èé€‰æ‹©ï¼š</p>\n<ul>\n<li><strong>æ˜¾å¼è¯„åˆ†åœºæ™¯</strong>ï¼šä¼˜å…ˆä½¿ç”¨çš®å°”é€Šç›¸å…³ç³»æ•°</li>\n<li><strong>éšå¼åé¦ˆåœºæ™¯</strong>ï¼šä¼˜å…ˆä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦</li>\n<li><strong>è¯„åˆ†åˆ†å¸ƒä¸å‡</strong>ï¼šè€ƒè™‘è°ƒæ•´ä½™å¼¦ç›¸ä¼¼åº¦</li>\n</ul>\n<h2 id=\"ğŸ’»-usercfç®—æ³•å®ç°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’»-usercfç®—æ³•å®ç°\"><span>ğŸ’» UserCFç®—æ³•å®ç°</span></a></h2>\n<details class=\"hint-container details\"><summary>UserCFæ ¸å¿ƒç®—æ³•æ¡†æ¶</summary>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-python\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> numpy </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">as</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> scipy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">spatial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">distance </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> cosine</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> scipy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">stats </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> pearsonr</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> UserBasedCF</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> __init__</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarity_method</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">pearson</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> k_neighbors</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">20</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">similarity_method </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarity_method</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">k_neighbors </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> k_neighbors</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> None</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> fit</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">è®­ç»ƒUserCFæ¨¡å‹</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">copy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">array</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">([</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">mean</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> row </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        ])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_compute_user_similarity</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> predict_rating</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">é¢„æµ‹ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        user_similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        item_raters </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">where</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # é€‰æ‹©æœ€ç›¸ä¼¼çš„kä¸ªé‚»å±…</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_indices </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argsort</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">-</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">k_neighbors</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # è®¡ç®—åŠ æƒå¹³å‡é¢„æµ‹</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_means </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        valid_mask </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> neighbor_similarities </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        numerator </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            neighbor_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> *</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> neighbor_means</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        denominator </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">abs</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> numerator </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> denominator</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> recommend_items</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_recommendations</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">ä¸ºç”¨æˆ·æ¨èç‰©å“</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        user_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        candidate_items </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">where</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_ratings </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        predictions </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">predict_rating</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">))</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">                      for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> candidate_items</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        predictions</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sort</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">key</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">lambda</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> x</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> x</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reverse</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> predictions</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_recommendations</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h2 id=\"ğŸª-usercfçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸª-usercfçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹\"><span>ğŸª UserCFçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹</span></a></h2>\n<h3 id=\"é€‚ç”¨åœºæ™¯åˆ†æ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é€‚ç”¨åœºæ™¯åˆ†æ\"><span>é€‚ç”¨åœºæ™¯åˆ†æ</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>åº”ç”¨é¢†åŸŸ</th>\n<th>é€‚ç”¨åŸå› </th>\n<th>æ³¨æ„äº‹é¡¹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ç¤¾äº¤åª’ä½“</strong></td>\n<td>ç”¨æˆ·å…´è¶£ç›¸ä¼¼åº¦é«˜</td>\n<td>æ³¨æ„ç”¨æˆ·éšç§ä¿æŠ¤</td>\n</tr>\n<tr>\n<td><strong>åœ¨çº¿æ•™è‚²</strong></td>\n<td>å­¦ä¹ è·¯å¾„ç›¸ä¼¼</td>\n<td>è€ƒè™‘å­¦ä¹ èƒ½åŠ›å·®å¼‚</td>\n</tr>\n<tr>\n<td><strong>æ–°é—»æ¨è</strong></td>\n<td>å…³æ³¨çƒ­ç‚¹ç›¸ä¼¼</td>\n<td>éœ€è¦æ—¶æ•ˆæ€§å¤„ç†</td>\n</tr>\n<tr>\n<td><strong>éŸ³ä¹æ¨è</strong></td>\n<td>å“å‘³ç¾¤ä½“æ€§æ˜æ˜¾</td>\n<td>è€ƒè™‘æƒ…å¢ƒå› ç´ </td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"usercfçš„æŠ€æœ¯ç‰¹ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfçš„æŠ€æœ¯ç‰¹ç‚¹\"><span>UserCFçš„æŠ€æœ¯ç‰¹ç‚¹</span></a></h3>\n<p><strong>ä¼˜åŠ¿ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li><strong>ç¤¾ä¼šåŒ–æ¨è</strong>ï¼šåæ˜ ç¾¤ä½“æ™ºæ…§å’Œç¤¾ä¼šåŒ–å…´è¶£</li>\n<li><strong>æ–°é¢–æ€§å¥½</strong>ï¼šèƒ½æ¨èç”¨æˆ·æ„æƒ³ä¸åˆ°çš„å†…å®¹</li>\n<li><strong>è§£é‡Šæ€§å¼º</strong>ï¼šå¯ä»¥è§£é‡Šä¸º&quot;å–œæ¬¢ç±»ä¼¼å†…å®¹çš„ç”¨æˆ·è¿˜å–œæ¬¢...&quot;</li>\n<li><strong>æ— å†…å®¹ä¾èµ–</strong>ï¼šä¸éœ€è¦ç‰©å“å†…å®¹ç‰¹å¾</li>\n</ul>\n<p><strong>åŠ£åŠ¿æŒ‘æˆ˜</strong>ï¼š</p>\n<ul>\n<li><strong>å®æ—¶æ€§å·®</strong>ï¼šç”¨æˆ·ç›¸ä¼¼åº¦éœ€è¦é¢‘ç¹é‡è®¡ç®—</li>\n<li><strong>ç¨€ç–æ€§æ•æ„Ÿ</strong>ï¼šæ–°ç”¨æˆ·å’Œæ´»è·ƒåº¦ä½çš„ç”¨æˆ·æ¨èæ•ˆæœå·®</li>\n<li><strong>å¯æ‰©å±•æ€§é—®é¢˜</strong>ï¼šç”¨æˆ·æ•°é‡å¢é•¿æ—¶è®¡ç®—å¤æ‚åº¦æ¿€å¢</li>\n<li><strong>æµè¡Œåè§</strong>ï¼šå€¾å‘äºæ¨èçƒ­é—¨å†…å®¹</li>\n</ul>\n<h2 id=\"ğŸš€-usercfçš„ä¼˜åŒ–ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸš€-usercfçš„ä¼˜åŒ–ç­–ç•¥\"><span>ğŸš€ UserCFçš„ä¼˜åŒ–ç­–ç•¥</span></a></h2>\n<h3 id=\"æ€§èƒ½ä¼˜åŒ–æ–¹æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€§èƒ½ä¼˜åŒ–æ–¹æ³•\"><span>æ€§èƒ½ä¼˜åŒ–æ–¹æ³•</span></a></h3>\n<ol>\n<li>\n<p><strong>é¢„è®¡ç®—ä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ç¦»çº¿è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ</li>\n<li>é¢„è®¡ç®—æ¯ä¸ªç”¨æˆ·çš„TOP-Ké‚»å±…</li>\n<li>ä½¿ç”¨å¢é‡æ›´æ–°ç­–ç•¥</li>\n</ul>\n</li>\n<li>\n<p><strong>è¿‘ä¼¼è®¡ç®—</strong>ï¼š</p>\n<ul>\n<li><strong>LSH (Locality Sensitive Hashing)</strong>ï¼šå¿«é€Ÿæ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·</li>\n<li><strong>éšæœºé‡‡æ ·</strong>ï¼šé™ä½è®¡ç®—å¤æ‚åº¦</li>\n<li><strong>èšç±»é¢„å¤„ç†</strong>ï¼šå…ˆèšç±»å†åœ¨ç±»å†…è®¡ç®—ç›¸ä¼¼åº¦</li>\n</ul>\n</li>\n<li>\n<p><strong>ç¨€ç–çŸ©é˜µä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ä½¿ç”¨ scipy.sparse å­˜å‚¨ç¨€ç–çŸ©é˜µ</li>\n<li>åªå­˜å‚¨ç›¸ä¼¼åº¦å¤§äºé˜ˆå€¼çš„ç”¨æˆ·å¯¹</li>\n<li>é‡‡ç”¨åˆ†å—è®¡ç®—ç­–ç•¥</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"ç®—æ³•æ”¹è¿›æ–¹å‘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ç®—æ³•æ”¹è¿›æ–¹å‘\"><span>ç®—æ³•æ”¹è¿›æ–¹å‘</span></a></h3>\n<ol>\n<li>\n<p><strong>æ—¶é—´è¡°å‡</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>s</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>â‹…</mo><mi>exp</mi><mo>â¡</mo><mo stretchy=\"false\">(</mo><mo>âˆ’</mo><mi>Î»</mi><mo>â‹…</mo><mi mathvariant=\"normal\">Î”</mi><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim_{time}(u,v) = sim(u,v) \\cdot \\exp(-\\lambda \\cdot \\Delta t)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">i</span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">im</span><span class=\"mord mathnormal mtight\">e</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">exp</span><span class=\"mopen\">(</span><span class=\"mord\">âˆ’</span><span class=\"mord mathnormal\">Î»</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Î”</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼š</p>\n<ul>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> æ˜¯åŸºç¡€ç›¸ä¼¼åº¦</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">Î»</span></span></span></span> æ˜¯æ—¶é—´è¡°å‡ç³»æ•°ï¼ˆæ§åˆ¶è¡°å‡å¼ºåº¦ï¼‰</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Î”</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">\\Delta t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Î”</span><span class=\"mord mathnormal\">t</span></span></span></span> æ˜¯æ—¶é—´é—´éš”ï¼ˆå½“å‰æ—¶é—´ä¸äº¤äº’æ—¶é—´çš„å·®å€¼ï¼‰</li>\n</ul>\n</li>\n<li>\n<p><strong>ç½®ä¿¡åº¦åŠ æƒ</strong>ï¼š\næ ¹æ®å…±åŒè¯„åˆ†ç‰©å“æ•°é‡è°ƒæ•´ç›¸ä¼¼åº¦æƒé‡</p>\n</li>\n<li>\n<p><strong>å¤šçº§é‚»å±…</strong>ï¼š\nä¸ä»…è€ƒè™‘ç›´æ¥é‚»å±…ï¼Œè¿˜è€ƒè™‘é‚»å±…çš„é‚»å±…</p>\n</li>\n</ol>\n<h2 id=\"ğŸ”„-usercfçš„å˜ç§ç®—æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ”„-usercfçš„å˜ç§ç®—æ³•\"><span>ğŸ”„ UserCFçš„å˜ç§ç®—æ³•</span></a></h2>\n<h3 id=\"åŸºäºèšç±»çš„usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åŸºäºèšç±»çš„usercf\"><span>åŸºäºèšç±»çš„UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå…ˆå°†ç”¨æˆ·èšç±»ï¼Œå†åœ¨ç±»å†…è¿›è¡ŒååŒè¿‡æ»¤</p>\n<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>\n<ul>\n<li>é™ä½è®¡ç®—å¤æ‚åº¦</li>\n<li>æé«˜æ¨èå¤šæ ·æ€§</li>\n<li>æ›´å¥½å¤„ç†æ•°æ®ç¨€ç–æ€§</li>\n</ul>\n<h3 id=\"åŸºäºä¿¡ä»»çš„usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åŸºäºä¿¡ä»»çš„usercf\"><span>åŸºäºä¿¡ä»»çš„UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šç»“åˆç”¨æˆ·ä¹‹é—´çš„ä¿¡ä»»å…³ç³»</p>\n<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>\n<ul>\n<li>ç¤¾äº¤ç½‘ç»œæ¨è</li>\n<li>ä¸“å®¶æ¨èç³»ç»Ÿ</li>\n<li>å£ç¢‘è¥é”€å¹³å°</li>\n</ul>\n<h3 id=\"æ¦‚ç‡usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ¦‚ç‡usercf\"><span>æ¦‚ç‡UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šä½¿ç”¨æ¦‚ç‡æ¨¡å‹æè¿°ç”¨æˆ·ç›¸ä¼¼æ€§</p>\n<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>\n<ul>\n<li>æ›´å¥½çš„ä¸ç¡®å®šæ€§å¤„ç†</li>\n<li>æ”¯æŒè´å¶æ–¯æ¨ç†</li>\n<li>æ˜“äºèå…¥å…¶ä»–æ¦‚ç‡æ¨¡å‹</li>\n</ul>\n<h2 id=\"âš¡-å®æ—¶æ¨èä¼˜åŒ–\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#âš¡-å®æ—¶æ¨èä¼˜åŒ–\"><span>âš¡ å®æ—¶æ¨èä¼˜åŒ–</span></a></h2>\n<h3 id=\"usercfæ¨èç³»ç»Ÿæ¶æ„å›¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfæ¨èç³»ç»Ÿæ¶æ„å›¾\"><span>UserCFæ¨èç³»ç»Ÿæ¶æ„å›¾</span></a></h3>\n<Mermaid id=\"mermaid-445\" code=\"eJxVkctOwkAUhvc8xUn3xBcwGKFc3eqKsFCjcWFigiYuxMQQoFWggC2IcmlKwKAJt4iBSNF3Icx0utJHsDNtEGcxiznf+c//nzk+Pbs8PNmPX8Au7wLrbEe5H7XUBkPpYnFCBhM8SnIxcLs94L2ySvefYOgy6lW3uGvW4KW1BLeopwGV5stpj0uAL8otnjQwamMsdciXgmpNLvaPbuQA119XDTydquRh7/wo7gtgqUvyRaSXsSw5fezimQ0/ZeU7wOUhzveRkEFtwaH8DAjQ6ZXvacEyMF3qOvp4Jn3N6D+sawUYGmRpO2AmZ2iUNm9ucfbFSsuIICNClJAGQAYpJGbMVgq/Z9d1QowKM09ZsJ0biorFokOFGRChwGp32FpMZegAEQb4/iR3qP9H5v9tZszUpV5FucrmQXzDYy0pZXmw4zgvsohaTVMo2KLs0Y5PxiqZz1FDIJrmfCHv+gXo+99x\"></Mermaid><h3 id=\"å¢é‡æ›´æ–°ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¢é‡æ›´æ–°ç­–ç•¥\"><span>å¢é‡æ›´æ–°ç­–ç•¥</span></a></h3>\n<ol>\n<li><strong>ç›¸ä¼¼åº¦çŸ©é˜µå¢é‡æ›´æ–°</strong>ï¼šåªæ›´æ–°å‘ç”Ÿå˜åŒ–çš„ç”¨æˆ·ç›¸ä¼¼åº¦</li>\n<li><strong>æ»‘åŠ¨çª—å£</strong>ï¼šåªè€ƒè™‘æœ€è¿‘Nå¤©çš„ç”¨æˆ·è¡Œä¸º</li>\n<li><strong>å¼‚æ­¥è®¡ç®—</strong>ï¼šåå°å¼‚æ­¥æ›´æ–°ç›¸ä¼¼åº¦çŸ©é˜µ</li>\n</ol>\n<h2 id=\"ğŸ“Š-usercfä¸“å±è°ƒä¼˜ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“Š-usercfä¸“å±è°ƒä¼˜ç­–ç•¥\"><span>ğŸ“Š UserCFä¸“å±è°ƒä¼˜ç­–ç•¥</span></a></h2>\n<h3 id=\"usercfå…³é”®å‚æ•°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfå…³é”®å‚æ•°\"><span>UserCFå…³é”®å‚æ•°</span></a></h3>\n<p><strong>é‚»å±…é€‰æ‹©ç­–ç•¥</strong>ï¼š</p>\n<ul>\n<li><strong>Kå€¼é€‰æ‹©</strong>ï¼šç¤¾äº¤åœºæ™¯K=20-30ï¼Œç”µå•†åœºæ™¯K=10-20</li>\n<li><strong>ç›¸ä¼¼åº¦é˜ˆå€¼</strong>ï¼šè®¾ç½®æœ€å°ç›¸ä¼¼åº¦0.1-0.3ï¼Œè¿‡æ»¤å™ªéŸ³ç”¨æˆ·</li>\n<li><strong>æ´»è·ƒåº¦æƒé‡</strong>ï¼šé«˜æ´»è·ƒç”¨æˆ·ç»™äºˆæ›´é«˜æƒé‡</li>\n</ul>\n<h3 id=\"usercfç‰¹æœ‰ä¼˜åŒ–\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfç‰¹æœ‰ä¼˜åŒ–\"><span>UserCFç‰¹æœ‰ä¼˜åŒ–</span></a></h3>\n<p><strong>ç¤¾äº¤å¢å¼º</strong>ï¼š</p>\n<ul>\n<li>ç»“åˆç”¨æˆ·ç¤¾äº¤å…³ç³»å›¾</li>\n<li>ä¿¡ä»»åº¦ä¼ æ’­ç®—æ³•</li>\n<li>ç¤¾åŒºå‘ç°å¢å¼ºç›¸ä¼¼åº¦</li>\n</ul>\n<p><strong>æ—¶åºä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ç”¨æˆ·å…´è¶£å˜åŒ–å»ºæ¨¡</li>\n<li>å­£èŠ‚æ€§åå¥½è€ƒè™‘</li>\n<li>çŸ­æœŸå’Œé•¿æœŸå…´è¶£å¹³è¡¡</li>\n</ul>\n<h2 id=\"ğŸ’¡-è¡Œä¸šåº”ç”¨æ¡ˆä¾‹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’¡-è¡Œä¸šåº”ç”¨æ¡ˆä¾‹\"><span>ğŸ’¡ è¡Œä¸šåº”ç”¨æ¡ˆä¾‹</span></a></h2>\n<h3 id=\"amazon-customers-who-bought-this-item-also-bought\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#amazon-customers-who-bought-this-item-also-bought\"><span>Amazon &quot;Customers who bought this item also bought&quot;</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>åŸºäºè´­ä¹°è¡Œä¸ºçš„UserCF</li>\n<li>ç»“åˆå•†å“ç±»åˆ«çº¦æŸ</li>\n<li>è€ƒè™‘è´­ä¹°æ—¶é—´è¡°å‡</li>\n</ul>\n<h3 id=\"netflix-ç”¨æˆ·ç¾¤ä½“æ¨è\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#netflix-ç”¨æˆ·ç¾¤ä½“æ¨è\"><span>Netflix ç”¨æˆ·ç¾¤ä½“æ¨è</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>ç»“åˆè§‚çœ‹æ—¶é•¿ä¿¡æ¯</li>\n<li>è€ƒè™‘ç”¨æˆ·äººå£ç»Ÿè®¡å­¦ç›¸ä¼¼æ€§</li>\n<li>å¤šå±‚æ¬¡ç›¸ä¼¼åº¦èåˆ</li>\n</ul>\n<h3 id=\"spotify-éŸ³ä¹å‘ç°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#spotify-éŸ³ä¹å‘ç°\"><span>Spotify éŸ³ä¹å‘ç°</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>åŸºäºæ’­æ”¾è¡Œä¸ºçš„UserCF</li>\n<li>ç»“åˆéŸ³ä¹ç‰¹å¾ç›¸ä¼¼åº¦</li>\n<li>è€ƒè™‘å¬æ­Œæƒ…å¢ƒå’Œæ—¶é—´</li>\n</ul>\n<h2 id=\"ğŸ”®-usercfçš„å‘å±•è¶‹åŠ¿\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ”®-usercfçš„å‘å±•è¶‹åŠ¿\"><span>ğŸ”® UserCFçš„å‘å±•è¶‹åŠ¿</span></a></h2>\n<h3 id=\"æŠ€æœ¯å‘å±•æ–¹å‘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æŠ€æœ¯å‘å±•æ–¹å‘\"><span>æŠ€æœ¯å‘å±•æ–¹å‘</span></a></h3>\n<ol>\n<li><strong>æ·±åº¦å­¦ä¹ èåˆ</strong>ï¼šNeural Collaborative Filtering</li>\n<li><strong>å›¾ç¥ç»ç½‘ç»œ</strong>ï¼šå»ºæ¨¡å¤æ‚ç”¨æˆ·å…³ç³»</li>\n<li><strong>è”é‚¦å­¦ä¹ </strong>ï¼šéšç§ä¿æŠ¤ä¸‹çš„ååŒè¿‡æ»¤</li>\n<li><strong>å¼ºåŒ–å­¦ä¹ </strong>ï¼šåŠ¨æ€è°ƒæ•´æ¨èç­–ç•¥</li>\n</ol>\n<h3 id=\"åº”ç”¨æ‹“å±•é¢†åŸŸ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åº”ç”¨æ‹“å±•é¢†åŸŸ\"><span>åº”ç”¨æ‹“å±•é¢†åŸŸ</span></a></h3>\n<ol>\n<li><strong>è·¨åŸŸæ¨è</strong>ï¼šåˆ©ç”¨å¤šå¹³å°ç”¨æˆ·è¡Œä¸º</li>\n<li><strong>ç¾¤ç»„æ¨è</strong>ï¼šä¸ºç”¨æˆ·ç¾¤ä½“ç”Ÿæˆæ¨è</li>\n<li><strong>æƒ…å¢ƒæ„ŸçŸ¥</strong>ï¼šç»“åˆæ—¶é—´ã€åœ°ç‚¹ã€æƒ…ç»ªç­‰æƒ…å¢ƒ</li>\n<li><strong>å¤šç›®æ ‡ä¼˜åŒ–</strong>ï¼šå¹³è¡¡å‡†ç¡®æ€§ã€å¤šæ ·æ€§ã€å…¬å¹³æ€§</li>\n</ol>\n<hr>\n<blockquote>\n<p>UserCFçš„ç²¾é«“åœ¨äºå‘ç°å¿—è¶£ç›¸æŠ•çš„ç¾¤ä½“ï¼Œè®©æ¨èä¸å†å­¤ç«‹ï¼Œè€Œæ˜¯å……æ»¡äººæƒ…å‘³çš„æ™ºèƒ½é€‰æ‹©</p>\n</blockquote>\n","env":{"base":"/search-rec-ads-cosmos-explorer/","filePath":"D:/softwore/user/git/work_code/WeBotDoc/docs/zh/3.ç¬¬ä¸‰ç« ï¼šæ¨èç®—æ³•--æ¯”ä½ æ›´æ‡‚ä½ çš„è´´å¿ƒå°æ£‰è¢„/1.æ¨èç®—æ³•çš„é—¨æ´¾/3.user_cf.md","filePathRelative":"zh/3.ç¬¬ä¸‰ç« ï¼šæ¨èç®—æ³•--æ¯”ä½ æ›´æ‡‚ä½ çš„è´´å¿ƒå°æ£‰è¢„/1.æ¨èç®—æ³•çš„é—¨æ´¾/3.user_cf.md","frontmatter":{"title":"åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ (UserCF)","createTime":"2025/06/05 09:34:56"},"sfcBlocks":{"template":{"type":"template","content":"<template><p>åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼ˆUser-based Collaborative Filtering, UserCFï¼‰æ˜¯ååŒè¿‡æ»¤ç®—æ³•å®¶æ—ä¸­çš„ç»å…¸æˆå‘˜ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯ <strong>&quot;å‘Šè¯‰æˆ‘ä½ çš„æœ‹å‹æ˜¯è°ï¼Œæˆ‘å°±çŸ¥é“ä½ æ˜¯ä»€ä¹ˆæ ·çš„äºº&quot;</strong>ã€‚é€šè¿‡å¯»æ‰¾å…´è¶£ç›¸ä¼¼çš„ç”¨æˆ·ç¾¤ä½“ï¼Œä¸ºç›®æ ‡ç”¨æˆ·æ¨èå…¶é‚»å±…ç”¨æˆ·å–œæ¬¢ä½†ä»–å°šæœªæ¥è§¦çš„ç‰©å“ã€‚</p>\n<h2 id=\"ğŸ¯-usercfçš„æ ¸å¿ƒæ€æƒ³\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ¯-usercfçš„æ ¸å¿ƒæ€æƒ³\"><span>ğŸ¯ UserCFçš„æ ¸å¿ƒæ€æƒ³</span></a></h2>\n<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">é‚»é‡Œæ•ˆåº”</p>\n<p>UserCFåŸºäºç¤¾ä¼šå­¦ä¸­çš„&quot;é‚»é‡Œæ•ˆåº”&quot;ç†è®ºï¼šç›¸ä¼¼çš„äººå¾€å¾€æœ‰ç›¸ä¼¼çš„è¡Œä¸ºæ¨¡å¼å’Œåå¥½ã€‚</p>\n</div>\n<h3 id=\"ç®—æ³•ç›´è§‰\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ç®—æ³•ç›´è§‰\"><span>ç®—æ³•ç›´è§‰</span></a></h3>\n<p>æƒ³è±¡ä½ åœ¨å¯»æ‰¾ä¸€éƒ¨å¥½ç”µå½±ï¼Œä½ å¯èƒ½ä¼šï¼š</p>\n<ol>\n<li>è¯¢é—®ä¸ä½ å“å‘³ç›¸ä¼¼çš„æœ‹å‹</li>\n<li>å‚è€ƒä»–ä»¬æœ€è¿‘è§‚çœ‹å¹¶æ¨èçš„ç”µå½±</li>\n<li>ä»ä¸­é€‰æ‹©ä½ è¿˜æ²¡çœ‹è¿‡çš„ç”µå½±</li>\n</ol>\n<p>UserCFå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„æ•°å­¦åŒ–å®ç°ï¼</p>\n<h3 id=\"æ•°å­¦è¡¨è¾¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ•°å­¦è¡¨è¾¾\"><span>æ•°å­¦è¡¨è¾¾</span></a></h3>\n<p>ç»™å®šç”¨æˆ·-ç‰©å“è¯„åˆ†çŸ©é˜µ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mrow><mi>m</mi><mo>Ã—</mo><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">R_{m \\times n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8917em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span></span></span></span>ï¼ŒUserCFçš„ç›®æ ‡æ˜¯é¢„æµ‹ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„è¯„åˆ† <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo>=</mo><mover accent=\"true\"><msub><mi>r</mi><mi>u</mi></msub><mo>Ë‰</mo></mover><mo>+</mo><mfrac><mrow><munder><mo>âˆ‘</mo><mrow><mi>v</mi><mo>âˆˆ</mo><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow></munder><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>â‹…</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mrow><mi>v</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo>âˆ’</mo><mover accent=\"true\"><msub><mi>r</mi><mi>v</mi></msub><mo>Ë‰</mo></mover><mo stretchy=\"false\">)</mo></mrow><mrow><munder><mo>âˆ‘</mo><mrow><mi>v</mi><mo>âˆˆ</mo><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow></munder><mi mathvariant=\"normal\">âˆ£</mi><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">âˆ£</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i} = \\bar{r_u} + \\frac{\\sum_{v \\in N_k(u)} sim(u,v) \\cdot (r_{v,i} - \\bar{r_v})}{\\sum_{v \\in N_k(u)} |sim(u,v)|}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7333em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.7754em;vertical-align:-1.1607em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6147em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">âˆ‘</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2253em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">âˆˆ</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3488em;margin-left:-0.109em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1512em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4747em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">âˆ£</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mord\">âˆ£</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.8647em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">âˆ‘</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2253em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">âˆˆ</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3488em;margin-left:-0.109em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1512em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4747em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1607em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼š</p>\n<ul>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mrow><mi>m</mi><mo>Ã—</mo><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">R_{m \\times n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8917em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span> ä¸ªç”¨æˆ·å¯¹ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> ä¸ªç‰©å“çš„è¯„åˆ†çŸ©é˜µ</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯é¢„æµ‹çš„ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><msub><mi>r</mi><mi>u</mi></msub><mo>Ë‰</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\bar{r_u}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7178em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> çš„å¹³å‡è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><msub><mi>r</mi><mi>v</mi></msub><mo>Ë‰</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\bar{r_v}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7178em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> çš„å¹³å‡è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mrow><mi>v</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">r_{v,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„å®é™…è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">N_k(u)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span></span></span></span> æ˜¯ä¸ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> æœ€ç›¸ä¼¼çš„ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ä¸ªç”¨æˆ·é›†åˆ</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å’Œ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> ä¹‹é—´çš„ç›¸ä¼¼åº¦</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">âˆ£</mi><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">âˆ£</mi></mrow><annotation encoding=\"application/x-tex\">|sim(u,v)|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">âˆ£</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mord\">âˆ£</span></span></span></span> è¡¨ç¤ºç›¸ä¼¼åº¦çš„ç»å¯¹å€¼ï¼ˆç”¨äºå½’ä¸€åŒ–ï¼‰</li>\n</ul>\n<h2 id=\"ğŸ“-usercfçš„æ ¸å¿ƒç®—æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“-usercfçš„æ ¸å¿ƒç®—æ³•\"><span>ğŸ“ UserCFçš„æ ¸å¿ƒç®—æ³•</span></a></h2>\n<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">å‚è€ƒååŒè¿‡æ»¤æ€»è§ˆ</p>\n<p>è¯¦ç»†çš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•è¯·å‚è€ƒ <RouteLink to=\"/zh/3.%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95--%E6%AF%94%E4%BD%A0%E6%9B%B4%E6%87%82%E4%BD%A0%E7%9A%84%E8%B4%B4%E5%BF%83%E5%B0%8F%E6%A3%89%E8%A2%84/1.%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95%E7%9A%84%E9%97%A8%E6%B4%BE/2.collaborative_filtering.html#%E7%9B%B8%E4%BC%BC%E5%BA%A6%E5%BA%A6%E9%87%8F%E6%96%B9%E6%B3%95%E8%AF%A6%E7%BB%86%E5%AF%B9%E6%AF%94\">ååŒè¿‡æ»¤æ€»è§ˆ</RouteLink> ä¸­çš„å®Œæ•´å¯¹æ¯”åˆ†æã€‚</p>\n</div>\n<p>UserCFçš„å…³é”®åœ¨äºå‡†ç¡®è®¡ç®—ç”¨æˆ·é—´ç›¸ä¼¼åº¦ï¼Œæ¨èé€‰æ‹©ï¼š</p>\n<ul>\n<li><strong>æ˜¾å¼è¯„åˆ†åœºæ™¯</strong>ï¼šä¼˜å…ˆä½¿ç”¨çš®å°”é€Šç›¸å…³ç³»æ•°</li>\n<li><strong>éšå¼åé¦ˆåœºæ™¯</strong>ï¼šä¼˜å…ˆä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦</li>\n<li><strong>è¯„åˆ†åˆ†å¸ƒä¸å‡</strong>ï¼šè€ƒè™‘è°ƒæ•´ä½™å¼¦ç›¸ä¼¼åº¦</li>\n</ul>\n<h2 id=\"ğŸ’»-usercfç®—æ³•å®ç°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’»-usercfç®—æ³•å®ç°\"><span>ğŸ’» UserCFç®—æ³•å®ç°</span></a></h2>\n<details class=\"hint-container details\"><summary>UserCFæ ¸å¿ƒç®—æ³•æ¡†æ¶</summary>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-python\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> numpy </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">as</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> scipy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">spatial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">distance </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> cosine</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> scipy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">stats </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> pearsonr</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> UserBasedCF</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> __init__</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarity_method</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">pearson</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> k_neighbors</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">20</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">similarity_method </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarity_method</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">k_neighbors </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> k_neighbors</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> None</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> fit</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">è®­ç»ƒUserCFæ¨¡å‹</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">copy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">array</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">([</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">mean</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> row </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        ])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_compute_user_similarity</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> predict_rating</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">é¢„æµ‹ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        user_similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        item_raters </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">where</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # é€‰æ‹©æœ€ç›¸ä¼¼çš„kä¸ªé‚»å±…</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_indices </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argsort</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">-</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">k_neighbors</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # è®¡ç®—åŠ æƒå¹³å‡é¢„æµ‹</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_means </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        valid_mask </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> neighbor_similarities </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        numerator </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            neighbor_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> *</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> neighbor_means</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        denominator </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">abs</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> numerator </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> denominator</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> recommend_items</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_recommendations</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">ä¸ºç”¨æˆ·æ¨èç‰©å“</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        user_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        candidate_items </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">where</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_ratings </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        predictions </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">predict_rating</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">))</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">                      for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> candidate_items</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        predictions</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sort</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">key</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">lambda</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> x</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> x</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reverse</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> predictions</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_recommendations</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h2 id=\"ğŸª-usercfçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸª-usercfçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹\"><span>ğŸª UserCFçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹</span></a></h2>\n<h3 id=\"é€‚ç”¨åœºæ™¯åˆ†æ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é€‚ç”¨åœºæ™¯åˆ†æ\"><span>é€‚ç”¨åœºæ™¯åˆ†æ</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>åº”ç”¨é¢†åŸŸ</th>\n<th>é€‚ç”¨åŸå› </th>\n<th>æ³¨æ„äº‹é¡¹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ç¤¾äº¤åª’ä½“</strong></td>\n<td>ç”¨æˆ·å…´è¶£ç›¸ä¼¼åº¦é«˜</td>\n<td>æ³¨æ„ç”¨æˆ·éšç§ä¿æŠ¤</td>\n</tr>\n<tr>\n<td><strong>åœ¨çº¿æ•™è‚²</strong></td>\n<td>å­¦ä¹ è·¯å¾„ç›¸ä¼¼</td>\n<td>è€ƒè™‘å­¦ä¹ èƒ½åŠ›å·®å¼‚</td>\n</tr>\n<tr>\n<td><strong>æ–°é—»æ¨è</strong></td>\n<td>å…³æ³¨çƒ­ç‚¹ç›¸ä¼¼</td>\n<td>éœ€è¦æ—¶æ•ˆæ€§å¤„ç†</td>\n</tr>\n<tr>\n<td><strong>éŸ³ä¹æ¨è</strong></td>\n<td>å“å‘³ç¾¤ä½“æ€§æ˜æ˜¾</td>\n<td>è€ƒè™‘æƒ…å¢ƒå› ç´ </td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"usercfçš„æŠ€æœ¯ç‰¹ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfçš„æŠ€æœ¯ç‰¹ç‚¹\"><span>UserCFçš„æŠ€æœ¯ç‰¹ç‚¹</span></a></h3>\n<p><strong>ä¼˜åŠ¿ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li><strong>ç¤¾ä¼šåŒ–æ¨è</strong>ï¼šåæ˜ ç¾¤ä½“æ™ºæ…§å’Œç¤¾ä¼šåŒ–å…´è¶£</li>\n<li><strong>æ–°é¢–æ€§å¥½</strong>ï¼šèƒ½æ¨èç”¨æˆ·æ„æƒ³ä¸åˆ°çš„å†…å®¹</li>\n<li><strong>è§£é‡Šæ€§å¼º</strong>ï¼šå¯ä»¥è§£é‡Šä¸º&quot;å–œæ¬¢ç±»ä¼¼å†…å®¹çš„ç”¨æˆ·è¿˜å–œæ¬¢...&quot;</li>\n<li><strong>æ— å†…å®¹ä¾èµ–</strong>ï¼šä¸éœ€è¦ç‰©å“å†…å®¹ç‰¹å¾</li>\n</ul>\n<p><strong>åŠ£åŠ¿æŒ‘æˆ˜</strong>ï¼š</p>\n<ul>\n<li><strong>å®æ—¶æ€§å·®</strong>ï¼šç”¨æˆ·ç›¸ä¼¼åº¦éœ€è¦é¢‘ç¹é‡è®¡ç®—</li>\n<li><strong>ç¨€ç–æ€§æ•æ„Ÿ</strong>ï¼šæ–°ç”¨æˆ·å’Œæ´»è·ƒåº¦ä½çš„ç”¨æˆ·æ¨èæ•ˆæœå·®</li>\n<li><strong>å¯æ‰©å±•æ€§é—®é¢˜</strong>ï¼šç”¨æˆ·æ•°é‡å¢é•¿æ—¶è®¡ç®—å¤æ‚åº¦æ¿€å¢</li>\n<li><strong>æµè¡Œåè§</strong>ï¼šå€¾å‘äºæ¨èçƒ­é—¨å†…å®¹</li>\n</ul>\n<h2 id=\"ğŸš€-usercfçš„ä¼˜åŒ–ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸš€-usercfçš„ä¼˜åŒ–ç­–ç•¥\"><span>ğŸš€ UserCFçš„ä¼˜åŒ–ç­–ç•¥</span></a></h2>\n<h3 id=\"æ€§èƒ½ä¼˜åŒ–æ–¹æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€§èƒ½ä¼˜åŒ–æ–¹æ³•\"><span>æ€§èƒ½ä¼˜åŒ–æ–¹æ³•</span></a></h3>\n<ol>\n<li>\n<p><strong>é¢„è®¡ç®—ä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ç¦»çº¿è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ</li>\n<li>é¢„è®¡ç®—æ¯ä¸ªç”¨æˆ·çš„TOP-Ké‚»å±…</li>\n<li>ä½¿ç”¨å¢é‡æ›´æ–°ç­–ç•¥</li>\n</ul>\n</li>\n<li>\n<p><strong>è¿‘ä¼¼è®¡ç®—</strong>ï¼š</p>\n<ul>\n<li><strong>LSH (Locality Sensitive Hashing)</strong>ï¼šå¿«é€Ÿæ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·</li>\n<li><strong>éšæœºé‡‡æ ·</strong>ï¼šé™ä½è®¡ç®—å¤æ‚åº¦</li>\n<li><strong>èšç±»é¢„å¤„ç†</strong>ï¼šå…ˆèšç±»å†åœ¨ç±»å†…è®¡ç®—ç›¸ä¼¼åº¦</li>\n</ul>\n</li>\n<li>\n<p><strong>ç¨€ç–çŸ©é˜µä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ä½¿ç”¨ scipy.sparse å­˜å‚¨ç¨€ç–çŸ©é˜µ</li>\n<li>åªå­˜å‚¨ç›¸ä¼¼åº¦å¤§äºé˜ˆå€¼çš„ç”¨æˆ·å¯¹</li>\n<li>é‡‡ç”¨åˆ†å—è®¡ç®—ç­–ç•¥</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"ç®—æ³•æ”¹è¿›æ–¹å‘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ç®—æ³•æ”¹è¿›æ–¹å‘\"><span>ç®—æ³•æ”¹è¿›æ–¹å‘</span></a></h3>\n<ol>\n<li>\n<p><strong>æ—¶é—´è¡°å‡</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>s</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>â‹…</mo><mi>exp</mi><mo>â¡</mo><mo stretchy=\"false\">(</mo><mo>âˆ’</mo><mi>Î»</mi><mo>â‹…</mo><mi mathvariant=\"normal\">Î”</mi><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim_{time}(u,v) = sim(u,v) \\cdot \\exp(-\\lambda \\cdot \\Delta t)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">i</span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">im</span><span class=\"mord mathnormal mtight\">e</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">exp</span><span class=\"mopen\">(</span><span class=\"mord\">âˆ’</span><span class=\"mord mathnormal\">Î»</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Î”</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼š</p>\n<ul>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> æ˜¯åŸºç¡€ç›¸ä¼¼åº¦</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">Î»</span></span></span></span> æ˜¯æ—¶é—´è¡°å‡ç³»æ•°ï¼ˆæ§åˆ¶è¡°å‡å¼ºåº¦ï¼‰</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Î”</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">\\Delta t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Î”</span><span class=\"mord mathnormal\">t</span></span></span></span> æ˜¯æ—¶é—´é—´éš”ï¼ˆå½“å‰æ—¶é—´ä¸äº¤äº’æ—¶é—´çš„å·®å€¼ï¼‰</li>\n</ul>\n</li>\n<li>\n<p><strong>ç½®ä¿¡åº¦åŠ æƒ</strong>ï¼š\næ ¹æ®å…±åŒè¯„åˆ†ç‰©å“æ•°é‡è°ƒæ•´ç›¸ä¼¼åº¦æƒé‡</p>\n</li>\n<li>\n<p><strong>å¤šçº§é‚»å±…</strong>ï¼š\nä¸ä»…è€ƒè™‘ç›´æ¥é‚»å±…ï¼Œè¿˜è€ƒè™‘é‚»å±…çš„é‚»å±…</p>\n</li>\n</ol>\n<h2 id=\"ğŸ”„-usercfçš„å˜ç§ç®—æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ”„-usercfçš„å˜ç§ç®—æ³•\"><span>ğŸ”„ UserCFçš„å˜ç§ç®—æ³•</span></a></h2>\n<h3 id=\"åŸºäºèšç±»çš„usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åŸºäºèšç±»çš„usercf\"><span>åŸºäºèšç±»çš„UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå…ˆå°†ç”¨æˆ·èšç±»ï¼Œå†åœ¨ç±»å†…è¿›è¡ŒååŒè¿‡æ»¤</p>\n<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>\n<ul>\n<li>é™ä½è®¡ç®—å¤æ‚åº¦</li>\n<li>æé«˜æ¨èå¤šæ ·æ€§</li>\n<li>æ›´å¥½å¤„ç†æ•°æ®ç¨€ç–æ€§</li>\n</ul>\n<h3 id=\"åŸºäºä¿¡ä»»çš„usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åŸºäºä¿¡ä»»çš„usercf\"><span>åŸºäºä¿¡ä»»çš„UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šç»“åˆç”¨æˆ·ä¹‹é—´çš„ä¿¡ä»»å…³ç³»</p>\n<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>\n<ul>\n<li>ç¤¾äº¤ç½‘ç»œæ¨è</li>\n<li>ä¸“å®¶æ¨èç³»ç»Ÿ</li>\n<li>å£ç¢‘è¥é”€å¹³å°</li>\n</ul>\n<h3 id=\"æ¦‚ç‡usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ¦‚ç‡usercf\"><span>æ¦‚ç‡UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šä½¿ç”¨æ¦‚ç‡æ¨¡å‹æè¿°ç”¨æˆ·ç›¸ä¼¼æ€§</p>\n<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>\n<ul>\n<li>æ›´å¥½çš„ä¸ç¡®å®šæ€§å¤„ç†</li>\n<li>æ”¯æŒè´å¶æ–¯æ¨ç†</li>\n<li>æ˜“äºèå…¥å…¶ä»–æ¦‚ç‡æ¨¡å‹</li>\n</ul>\n<h2 id=\"âš¡-å®æ—¶æ¨èä¼˜åŒ–\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#âš¡-å®æ—¶æ¨èä¼˜åŒ–\"><span>âš¡ å®æ—¶æ¨èä¼˜åŒ–</span></a></h2>\n<h3 id=\"usercfæ¨èç³»ç»Ÿæ¶æ„å›¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfæ¨èç³»ç»Ÿæ¶æ„å›¾\"><span>UserCFæ¨èç³»ç»Ÿæ¶æ„å›¾</span></a></h3>\n<Mermaid id=\"mermaid-445\" code=\"eJxVkctOwkAUhvc8xUn3xBcwGKFc3eqKsFCjcWFigiYuxMQQoFWggC2IcmlKwKAJt4iBSNF3Icx0utJHsDNtEGcxiznf+c//nzk+Pbs8PNmPX8Au7wLrbEe5H7XUBkPpYnFCBhM8SnIxcLs94L2ySvefYOgy6lW3uGvW4KW1BLeopwGV5stpj0uAL8otnjQwamMsdciXgmpNLvaPbuQA119XDTydquRh7/wo7gtgqUvyRaSXsSw5fezimQ0/ZeU7wOUhzveRkEFtwaH8DAjQ6ZXvacEyMF3qOvp4Jn3N6D+sawUYGmRpO2AmZ2iUNm9ucfbFSsuIICNClJAGQAYpJGbMVgq/Z9d1QowKM09ZsJ0biorFokOFGRChwGp32FpMZegAEQb4/iR3qP9H5v9tZszUpV5FucrmQXzDYy0pZXmw4zgvsohaTVMo2KLs0Y5PxiqZz1FDIJrmfCHv+gXo+99x\"></Mermaid><h3 id=\"å¢é‡æ›´æ–°ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¢é‡æ›´æ–°ç­–ç•¥\"><span>å¢é‡æ›´æ–°ç­–ç•¥</span></a></h3>\n<ol>\n<li><strong>ç›¸ä¼¼åº¦çŸ©é˜µå¢é‡æ›´æ–°</strong>ï¼šåªæ›´æ–°å‘ç”Ÿå˜åŒ–çš„ç”¨æˆ·ç›¸ä¼¼åº¦</li>\n<li><strong>æ»‘åŠ¨çª—å£</strong>ï¼šåªè€ƒè™‘æœ€è¿‘Nå¤©çš„ç”¨æˆ·è¡Œä¸º</li>\n<li><strong>å¼‚æ­¥è®¡ç®—</strong>ï¼šåå°å¼‚æ­¥æ›´æ–°ç›¸ä¼¼åº¦çŸ©é˜µ</li>\n</ol>\n<h2 id=\"ğŸ“Š-usercfä¸“å±è°ƒä¼˜ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“Š-usercfä¸“å±è°ƒä¼˜ç­–ç•¥\"><span>ğŸ“Š UserCFä¸“å±è°ƒä¼˜ç­–ç•¥</span></a></h2>\n<h3 id=\"usercfå…³é”®å‚æ•°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfå…³é”®å‚æ•°\"><span>UserCFå…³é”®å‚æ•°</span></a></h3>\n<p><strong>é‚»å±…é€‰æ‹©ç­–ç•¥</strong>ï¼š</p>\n<ul>\n<li><strong>Kå€¼é€‰æ‹©</strong>ï¼šç¤¾äº¤åœºæ™¯K=20-30ï¼Œç”µå•†åœºæ™¯K=10-20</li>\n<li><strong>ç›¸ä¼¼åº¦é˜ˆå€¼</strong>ï¼šè®¾ç½®æœ€å°ç›¸ä¼¼åº¦0.1-0.3ï¼Œè¿‡æ»¤å™ªéŸ³ç”¨æˆ·</li>\n<li><strong>æ´»è·ƒåº¦æƒé‡</strong>ï¼šé«˜æ´»è·ƒç”¨æˆ·ç»™äºˆæ›´é«˜æƒé‡</li>\n</ul>\n<h3 id=\"usercfç‰¹æœ‰ä¼˜åŒ–\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfç‰¹æœ‰ä¼˜åŒ–\"><span>UserCFç‰¹æœ‰ä¼˜åŒ–</span></a></h3>\n<p><strong>ç¤¾äº¤å¢å¼º</strong>ï¼š</p>\n<ul>\n<li>ç»“åˆç”¨æˆ·ç¤¾äº¤å…³ç³»å›¾</li>\n<li>ä¿¡ä»»åº¦ä¼ æ’­ç®—æ³•</li>\n<li>ç¤¾åŒºå‘ç°å¢å¼ºç›¸ä¼¼åº¦</li>\n</ul>\n<p><strong>æ—¶åºä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ç”¨æˆ·å…´è¶£å˜åŒ–å»ºæ¨¡</li>\n<li>å­£èŠ‚æ€§åå¥½è€ƒè™‘</li>\n<li>çŸ­æœŸå’Œé•¿æœŸå…´è¶£å¹³è¡¡</li>\n</ul>\n<h2 id=\"ğŸ’¡-è¡Œä¸šåº”ç”¨æ¡ˆä¾‹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’¡-è¡Œä¸šåº”ç”¨æ¡ˆä¾‹\"><span>ğŸ’¡ è¡Œä¸šåº”ç”¨æ¡ˆä¾‹</span></a></h2>\n<h3 id=\"amazon-customers-who-bought-this-item-also-bought\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#amazon-customers-who-bought-this-item-also-bought\"><span>Amazon &quot;Customers who bought this item also bought&quot;</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>åŸºäºè´­ä¹°è¡Œä¸ºçš„UserCF</li>\n<li>ç»“åˆå•†å“ç±»åˆ«çº¦æŸ</li>\n<li>è€ƒè™‘è´­ä¹°æ—¶é—´è¡°å‡</li>\n</ul>\n<h3 id=\"netflix-ç”¨æˆ·ç¾¤ä½“æ¨è\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#netflix-ç”¨æˆ·ç¾¤ä½“æ¨è\"><span>Netflix ç”¨æˆ·ç¾¤ä½“æ¨è</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>ç»“åˆè§‚çœ‹æ—¶é•¿ä¿¡æ¯</li>\n<li>è€ƒè™‘ç”¨æˆ·äººå£ç»Ÿè®¡å­¦ç›¸ä¼¼æ€§</li>\n<li>å¤šå±‚æ¬¡ç›¸ä¼¼åº¦èåˆ</li>\n</ul>\n<h3 id=\"spotify-éŸ³ä¹å‘ç°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#spotify-éŸ³ä¹å‘ç°\"><span>Spotify éŸ³ä¹å‘ç°</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>åŸºäºæ’­æ”¾è¡Œä¸ºçš„UserCF</li>\n<li>ç»“åˆéŸ³ä¹ç‰¹å¾ç›¸ä¼¼åº¦</li>\n<li>è€ƒè™‘å¬æ­Œæƒ…å¢ƒå’Œæ—¶é—´</li>\n</ul>\n<h2 id=\"ğŸ”®-usercfçš„å‘å±•è¶‹åŠ¿\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ”®-usercfçš„å‘å±•è¶‹åŠ¿\"><span>ğŸ”® UserCFçš„å‘å±•è¶‹åŠ¿</span></a></h2>\n<h3 id=\"æŠ€æœ¯å‘å±•æ–¹å‘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æŠ€æœ¯å‘å±•æ–¹å‘\"><span>æŠ€æœ¯å‘å±•æ–¹å‘</span></a></h3>\n<ol>\n<li><strong>æ·±åº¦å­¦ä¹ èåˆ</strong>ï¼šNeural Collaborative Filtering</li>\n<li><strong>å›¾ç¥ç»ç½‘ç»œ</strong>ï¼šå»ºæ¨¡å¤æ‚ç”¨æˆ·å…³ç³»</li>\n<li><strong>è”é‚¦å­¦ä¹ </strong>ï¼šéšç§ä¿æŠ¤ä¸‹çš„ååŒè¿‡æ»¤</li>\n<li><strong>å¼ºåŒ–å­¦ä¹ </strong>ï¼šåŠ¨æ€è°ƒæ•´æ¨èç­–ç•¥</li>\n</ol>\n<h3 id=\"åº”ç”¨æ‹“å±•é¢†åŸŸ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åº”ç”¨æ‹“å±•é¢†åŸŸ\"><span>åº”ç”¨æ‹“å±•é¢†åŸŸ</span></a></h3>\n<ol>\n<li><strong>è·¨åŸŸæ¨è</strong>ï¼šåˆ©ç”¨å¤šå¹³å°ç”¨æˆ·è¡Œä¸º</li>\n<li><strong>ç¾¤ç»„æ¨è</strong>ï¼šä¸ºç”¨æˆ·ç¾¤ä½“ç”Ÿæˆæ¨è</li>\n<li><strong>æƒ…å¢ƒæ„ŸçŸ¥</strong>ï¼šç»“åˆæ—¶é—´ã€åœ°ç‚¹ã€æƒ…ç»ªç­‰æƒ…å¢ƒ</li>\n<li><strong>å¤šç›®æ ‡ä¼˜åŒ–</strong>ï¼šå¹³è¡¡å‡†ç¡®æ€§ã€å¤šæ ·æ€§ã€å…¬å¹³æ€§</li>\n</ol>\n<hr>\n<blockquote>\n<p>UserCFçš„ç²¾é«“åœ¨äºå‘ç°å¿—è¶£ç›¸æŠ•çš„ç¾¤ä½“ï¼Œè®©æ¨èä¸å†å­¤ç«‹ï¼Œè€Œæ˜¯å……æ»¡äººæƒ…å‘³çš„æ™ºèƒ½é€‰æ‹©</p>\n</blockquote>\n</template>","contentStripped":"<p>åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼ˆUser-based Collaborative Filtering, UserCFï¼‰æ˜¯ååŒè¿‡æ»¤ç®—æ³•å®¶æ—ä¸­çš„ç»å…¸æˆå‘˜ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯ <strong>&quot;å‘Šè¯‰æˆ‘ä½ çš„æœ‹å‹æ˜¯è°ï¼Œæˆ‘å°±çŸ¥é“ä½ æ˜¯ä»€ä¹ˆæ ·çš„äºº&quot;</strong>ã€‚é€šè¿‡å¯»æ‰¾å…´è¶£ç›¸ä¼¼çš„ç”¨æˆ·ç¾¤ä½“ï¼Œä¸ºç›®æ ‡ç”¨æˆ·æ¨èå…¶é‚»å±…ç”¨æˆ·å–œæ¬¢ä½†ä»–å°šæœªæ¥è§¦çš„ç‰©å“ã€‚</p>\n<h2 id=\"ğŸ¯-usercfçš„æ ¸å¿ƒæ€æƒ³\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ¯-usercfçš„æ ¸å¿ƒæ€æƒ³\"><span>ğŸ¯ UserCFçš„æ ¸å¿ƒæ€æƒ³</span></a></h2>\n<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">é‚»é‡Œæ•ˆåº”</p>\n<p>UserCFåŸºäºç¤¾ä¼šå­¦ä¸­çš„&quot;é‚»é‡Œæ•ˆåº”&quot;ç†è®ºï¼šç›¸ä¼¼çš„äººå¾€å¾€æœ‰ç›¸ä¼¼çš„è¡Œä¸ºæ¨¡å¼å’Œåå¥½ã€‚</p>\n</div>\n<h3 id=\"ç®—æ³•ç›´è§‰\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ç®—æ³•ç›´è§‰\"><span>ç®—æ³•ç›´è§‰</span></a></h3>\n<p>æƒ³è±¡ä½ åœ¨å¯»æ‰¾ä¸€éƒ¨å¥½ç”µå½±ï¼Œä½ å¯èƒ½ä¼šï¼š</p>\n<ol>\n<li>è¯¢é—®ä¸ä½ å“å‘³ç›¸ä¼¼çš„æœ‹å‹</li>\n<li>å‚è€ƒä»–ä»¬æœ€è¿‘è§‚çœ‹å¹¶æ¨èçš„ç”µå½±</li>\n<li>ä»ä¸­é€‰æ‹©ä½ è¿˜æ²¡çœ‹è¿‡çš„ç”µå½±</li>\n</ol>\n<p>UserCFå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„æ•°å­¦åŒ–å®ç°ï¼</p>\n<h3 id=\"æ•°å­¦è¡¨è¾¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ•°å­¦è¡¨è¾¾\"><span>æ•°å­¦è¡¨è¾¾</span></a></h3>\n<p>ç»™å®šç”¨æˆ·-ç‰©å“è¯„åˆ†çŸ©é˜µ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mrow><mi>m</mi><mo>Ã—</mo><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">R_{m \\times n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8917em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span></span></span></span>ï¼ŒUserCFçš„ç›®æ ‡æ˜¯é¢„æµ‹ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„è¯„åˆ† <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo>=</mo><mover accent=\"true\"><msub><mi>r</mi><mi>u</mi></msub><mo>Ë‰</mo></mover><mo>+</mo><mfrac><mrow><munder><mo>âˆ‘</mo><mrow><mi>v</mi><mo>âˆˆ</mo><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow></munder><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>â‹…</mo><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mrow><mi>v</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo>âˆ’</mo><mover accent=\"true\"><msub><mi>r</mi><mi>v</mi></msub><mo>Ë‰</mo></mover><mo stretchy=\"false\">)</mo></mrow><mrow><munder><mo>âˆ‘</mo><mrow><mi>v</mi><mo>âˆˆ</mo><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow></munder><mi mathvariant=\"normal\">âˆ£</mi><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">âˆ£</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i} = \\bar{r_u} + \\frac{\\sum_{v \\in N_k(u)} sim(u,v) \\cdot (r_{v,i} - \\bar{r_v})}{\\sum_{v \\in N_k(u)} |sim(u,v)|}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7333em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.7754em;vertical-align:-1.1607em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6147em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">âˆ‘</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2253em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">âˆˆ</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3488em;margin-left:-0.109em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1512em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4747em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">âˆ£</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mord\">âˆ£</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.8647em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">âˆ‘</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2253em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">âˆˆ</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3488em;margin-left:-0.109em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1512em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4747em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1607em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼š</p>\n<ul>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mrow><mi>m</mi><mo>Ã—</mo><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">R_{m \\times n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8917em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">Ã—</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span> ä¸ªç”¨æˆ·å¯¹ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> ä¸ªç‰©å“çš„è¯„åˆ†çŸ©é˜µ</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>r</mi><mo>^</mo></mover><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\hat{r}_{u,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯é¢„æµ‹çš„ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><msub><mi>r</mi><mi>u</mi></msub><mo>Ë‰</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\bar{r_u}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7178em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> çš„å¹³å‡è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><msub><mi>r</mi><mi>v</mi></msub><mo>Ë‰</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\bar{r_v}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7178em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">Ë‰</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> çš„å¹³å‡è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>r</mi><mrow><mi>v</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">r_{v,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> å¯¹ç‰©å“ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> çš„å®é™…è¯„åˆ†</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>N</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">N_k(u)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span></span></span></span> æ˜¯ä¸ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> æœ€ç›¸ä¼¼çš„ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> ä¸ªç”¨æˆ·é›†åˆ</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> æ˜¯ç”¨æˆ· <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span> å’Œ <span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> ä¹‹é—´çš„ç›¸ä¼¼åº¦</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">âˆ£</mi><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">âˆ£</mi></mrow><annotation encoding=\"application/x-tex\">|sim(u,v)|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">âˆ£</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mord\">âˆ£</span></span></span></span> è¡¨ç¤ºç›¸ä¼¼åº¦çš„ç»å¯¹å€¼ï¼ˆç”¨äºå½’ä¸€åŒ–ï¼‰</li>\n</ul>\n<h2 id=\"ğŸ“-usercfçš„æ ¸å¿ƒç®—æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“-usercfçš„æ ¸å¿ƒç®—æ³•\"><span>ğŸ“ UserCFçš„æ ¸å¿ƒç®—æ³•</span></a></h2>\n<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">å‚è€ƒååŒè¿‡æ»¤æ€»è§ˆ</p>\n<p>è¯¦ç»†çš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•è¯·å‚è€ƒ <RouteLink to=\"/zh/3.%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95--%E6%AF%94%E4%BD%A0%E6%9B%B4%E6%87%82%E4%BD%A0%E7%9A%84%E8%B4%B4%E5%BF%83%E5%B0%8F%E6%A3%89%E8%A2%84/1.%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95%E7%9A%84%E9%97%A8%E6%B4%BE/2.collaborative_filtering.html#%E7%9B%B8%E4%BC%BC%E5%BA%A6%E5%BA%A6%E9%87%8F%E6%96%B9%E6%B3%95%E8%AF%A6%E7%BB%86%E5%AF%B9%E6%AF%94\">ååŒè¿‡æ»¤æ€»è§ˆ</RouteLink> ä¸­çš„å®Œæ•´å¯¹æ¯”åˆ†æã€‚</p>\n</div>\n<p>UserCFçš„å…³é”®åœ¨äºå‡†ç¡®è®¡ç®—ç”¨æˆ·é—´ç›¸ä¼¼åº¦ï¼Œæ¨èé€‰æ‹©ï¼š</p>\n<ul>\n<li><strong>æ˜¾å¼è¯„åˆ†åœºæ™¯</strong>ï¼šä¼˜å…ˆä½¿ç”¨çš®å°”é€Šç›¸å…³ç³»æ•°</li>\n<li><strong>éšå¼åé¦ˆåœºæ™¯</strong>ï¼šä¼˜å…ˆä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦</li>\n<li><strong>è¯„åˆ†åˆ†å¸ƒä¸å‡</strong>ï¼šè€ƒè™‘è°ƒæ•´ä½™å¼¦ç›¸ä¼¼åº¦</li>\n</ul>\n<h2 id=\"ğŸ’»-usercfç®—æ³•å®ç°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’»-usercfç®—æ³•å®ç°\"><span>ğŸ’» UserCFç®—æ³•å®ç°</span></a></h2>\n<details class=\"hint-container details\"><summary>UserCFæ ¸å¿ƒç®—æ³•æ¡†æ¶</summary>\n<div class=\"language-python line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"python\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-python\"><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> numpy </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">as</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> scipy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">spatial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">distance </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> cosine</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">from</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> scipy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">stats </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> pearsonr</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> UserBasedCF</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> __init__</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarity_method</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">pearson</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> k_neighbors</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">20</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">similarity_method </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarity_method</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">k_neighbors </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> k_neighbors</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> None</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> fit</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">è®­ç»ƒUserCFæ¨¡å‹</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">copy</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">array</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">([</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">mean</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">row </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> row </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_item_matrix</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        ])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_compute_user_similarity</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> predict_rating</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">é¢„æµ‹ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        user_similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_similarity_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        item_raters </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">where</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> len</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # é€‰æ‹©æœ€ç›¸ä¼¼çš„kä¸ªé‚»å±…</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_indices </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argsort</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">-</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">k_neighbors</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">        # è®¡ç®—åŠ æƒå¹³å‡é¢„æµ‹</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_similarities </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        neighbor_means </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_raters</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_indices</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        valid_mask </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> neighbor_similarities </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        numerator </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            neighbor_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> *</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> neighbor_means</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        denominator </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sum</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">abs</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">neighbor_similarities</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">valid_mask</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_mean_ratings</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> numerator </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> denominator</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    def</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> recommend_items</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> n_recommendations</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">):</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">        \"\"\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">ä¸ºç”¨æˆ·æ¨èç‰©å“</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"\"\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        user_ratings </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_item_matrix</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        candidate_items </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> np</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">where</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_ratings </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">==</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        predictions </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">predict_rating</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">user_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">))</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">                      for</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> item_id </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">in</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> candidate_items</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        predictions</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">sort</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">key</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">lambda</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> x</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> x</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reverse</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> predictions</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">n_recommendations</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h2 id=\"ğŸª-usercfçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸª-usercfçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹\"><span>ğŸª UserCFçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹</span></a></h2>\n<h3 id=\"é€‚ç”¨åœºæ™¯åˆ†æ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#é€‚ç”¨åœºæ™¯åˆ†æ\"><span>é€‚ç”¨åœºæ™¯åˆ†æ</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>åº”ç”¨é¢†åŸŸ</th>\n<th>é€‚ç”¨åŸå› </th>\n<th>æ³¨æ„äº‹é¡¹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ç¤¾äº¤åª’ä½“</strong></td>\n<td>ç”¨æˆ·å…´è¶£ç›¸ä¼¼åº¦é«˜</td>\n<td>æ³¨æ„ç”¨æˆ·éšç§ä¿æŠ¤</td>\n</tr>\n<tr>\n<td><strong>åœ¨çº¿æ•™è‚²</strong></td>\n<td>å­¦ä¹ è·¯å¾„ç›¸ä¼¼</td>\n<td>è€ƒè™‘å­¦ä¹ èƒ½åŠ›å·®å¼‚</td>\n</tr>\n<tr>\n<td><strong>æ–°é—»æ¨è</strong></td>\n<td>å…³æ³¨çƒ­ç‚¹ç›¸ä¼¼</td>\n<td>éœ€è¦æ—¶æ•ˆæ€§å¤„ç†</td>\n</tr>\n<tr>\n<td><strong>éŸ³ä¹æ¨è</strong></td>\n<td>å“å‘³ç¾¤ä½“æ€§æ˜æ˜¾</td>\n<td>è€ƒè™‘æƒ…å¢ƒå› ç´ </td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"usercfçš„æŠ€æœ¯ç‰¹ç‚¹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfçš„æŠ€æœ¯ç‰¹ç‚¹\"><span>UserCFçš„æŠ€æœ¯ç‰¹ç‚¹</span></a></h3>\n<p><strong>ä¼˜åŠ¿ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li><strong>ç¤¾ä¼šåŒ–æ¨è</strong>ï¼šåæ˜ ç¾¤ä½“æ™ºæ…§å’Œç¤¾ä¼šåŒ–å…´è¶£</li>\n<li><strong>æ–°é¢–æ€§å¥½</strong>ï¼šèƒ½æ¨èç”¨æˆ·æ„æƒ³ä¸åˆ°çš„å†…å®¹</li>\n<li><strong>è§£é‡Šæ€§å¼º</strong>ï¼šå¯ä»¥è§£é‡Šä¸º&quot;å–œæ¬¢ç±»ä¼¼å†…å®¹çš„ç”¨æˆ·è¿˜å–œæ¬¢...&quot;</li>\n<li><strong>æ— å†…å®¹ä¾èµ–</strong>ï¼šä¸éœ€è¦ç‰©å“å†…å®¹ç‰¹å¾</li>\n</ul>\n<p><strong>åŠ£åŠ¿æŒ‘æˆ˜</strong>ï¼š</p>\n<ul>\n<li><strong>å®æ—¶æ€§å·®</strong>ï¼šç”¨æˆ·ç›¸ä¼¼åº¦éœ€è¦é¢‘ç¹é‡è®¡ç®—</li>\n<li><strong>ç¨€ç–æ€§æ•æ„Ÿ</strong>ï¼šæ–°ç”¨æˆ·å’Œæ´»è·ƒåº¦ä½çš„ç”¨æˆ·æ¨èæ•ˆæœå·®</li>\n<li><strong>å¯æ‰©å±•æ€§é—®é¢˜</strong>ï¼šç”¨æˆ·æ•°é‡å¢é•¿æ—¶è®¡ç®—å¤æ‚åº¦æ¿€å¢</li>\n<li><strong>æµè¡Œåè§</strong>ï¼šå€¾å‘äºæ¨èçƒ­é—¨å†…å®¹</li>\n</ul>\n<h2 id=\"ğŸš€-usercfçš„ä¼˜åŒ–ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸš€-usercfçš„ä¼˜åŒ–ç­–ç•¥\"><span>ğŸš€ UserCFçš„ä¼˜åŒ–ç­–ç•¥</span></a></h2>\n<h3 id=\"æ€§èƒ½ä¼˜åŒ–æ–¹æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ€§èƒ½ä¼˜åŒ–æ–¹æ³•\"><span>æ€§èƒ½ä¼˜åŒ–æ–¹æ³•</span></a></h3>\n<ol>\n<li>\n<p><strong>é¢„è®¡ç®—ä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ç¦»çº¿è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ</li>\n<li>é¢„è®¡ç®—æ¯ä¸ªç”¨æˆ·çš„TOP-Ké‚»å±…</li>\n<li>ä½¿ç”¨å¢é‡æ›´æ–°ç­–ç•¥</li>\n</ul>\n</li>\n<li>\n<p><strong>è¿‘ä¼¼è®¡ç®—</strong>ï¼š</p>\n<ul>\n<li><strong>LSH (Locality Sensitive Hashing)</strong>ï¼šå¿«é€Ÿæ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·</li>\n<li><strong>éšæœºé‡‡æ ·</strong>ï¼šé™ä½è®¡ç®—å¤æ‚åº¦</li>\n<li><strong>èšç±»é¢„å¤„ç†</strong>ï¼šå…ˆèšç±»å†åœ¨ç±»å†…è®¡ç®—ç›¸ä¼¼åº¦</li>\n</ul>\n</li>\n<li>\n<p><strong>ç¨€ç–çŸ©é˜µä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ä½¿ç”¨ scipy.sparse å­˜å‚¨ç¨€ç–çŸ©é˜µ</li>\n<li>åªå­˜å‚¨ç›¸ä¼¼åº¦å¤§äºé˜ˆå€¼çš„ç”¨æˆ·å¯¹</li>\n<li>é‡‡ç”¨åˆ†å—è®¡ç®—ç­–ç•¥</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"ç®—æ³•æ”¹è¿›æ–¹å‘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ç®—æ³•æ”¹è¿›æ–¹å‘\"><span>ç®—æ³•æ”¹è¿›æ–¹å‘</span></a></h3>\n<ol>\n<li>\n<p><strong>æ—¶é—´è¡°å‡</strong>ï¼š</p>\n<p v-pre class='katex-block'><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>s</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>â‹…</mo><mi>exp</mi><mo>â¡</mo><mo stretchy=\"false\">(</mo><mo>âˆ’</mo><mi>Î»</mi><mo>â‹…</mo><mi mathvariant=\"normal\">Î”</mi><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim_{time}(u,v) = sim(u,v) \\cdot \\exp(-\\lambda \\cdot \\Delta t)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">i</span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">im</span><span class=\"mord mathnormal mtight\">e</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">exp</span><span class=\"mopen\">(</span><span class=\"mord\">âˆ’</span><span class=\"mord mathnormal\">Î»</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Î”</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>å…¶ä¸­ï¼š</p>\n<ul>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>i</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">sim(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">im</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> æ˜¯åŸºç¡€ç›¸ä¼¼åº¦</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î»</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">Î»</span></span></span></span> æ˜¯æ—¶é—´è¡°å‡ç³»æ•°ï¼ˆæ§åˆ¶è¡°å‡å¼ºåº¦ï¼‰</li>\n<li><span v-pre class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Î”</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">\\Delta t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Î”</span><span class=\"mord mathnormal\">t</span></span></span></span> æ˜¯æ—¶é—´é—´éš”ï¼ˆå½“å‰æ—¶é—´ä¸äº¤äº’æ—¶é—´çš„å·®å€¼ï¼‰</li>\n</ul>\n</li>\n<li>\n<p><strong>ç½®ä¿¡åº¦åŠ æƒ</strong>ï¼š\næ ¹æ®å…±åŒè¯„åˆ†ç‰©å“æ•°é‡è°ƒæ•´ç›¸ä¼¼åº¦æƒé‡</p>\n</li>\n<li>\n<p><strong>å¤šçº§é‚»å±…</strong>ï¼š\nä¸ä»…è€ƒè™‘ç›´æ¥é‚»å±…ï¼Œè¿˜è€ƒè™‘é‚»å±…çš„é‚»å±…</p>\n</li>\n</ol>\n<h2 id=\"ğŸ”„-usercfçš„å˜ç§ç®—æ³•\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ”„-usercfçš„å˜ç§ç®—æ³•\"><span>ğŸ”„ UserCFçš„å˜ç§ç®—æ³•</span></a></h2>\n<h3 id=\"åŸºäºèšç±»çš„usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åŸºäºèšç±»çš„usercf\"><span>åŸºäºèšç±»çš„UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå…ˆå°†ç”¨æˆ·èšç±»ï¼Œå†åœ¨ç±»å†…è¿›è¡ŒååŒè¿‡æ»¤</p>\n<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>\n<ul>\n<li>é™ä½è®¡ç®—å¤æ‚åº¦</li>\n<li>æé«˜æ¨èå¤šæ ·æ€§</li>\n<li>æ›´å¥½å¤„ç†æ•°æ®ç¨€ç–æ€§</li>\n</ul>\n<h3 id=\"åŸºäºä¿¡ä»»çš„usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åŸºäºä¿¡ä»»çš„usercf\"><span>åŸºäºä¿¡ä»»çš„UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šç»“åˆç”¨æˆ·ä¹‹é—´çš„ä¿¡ä»»å…³ç³»</p>\n<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>\n<ul>\n<li>ç¤¾äº¤ç½‘ç»œæ¨è</li>\n<li>ä¸“å®¶æ¨èç³»ç»Ÿ</li>\n<li>å£ç¢‘è¥é”€å¹³å°</li>\n</ul>\n<h3 id=\"æ¦‚ç‡usercf\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æ¦‚ç‡usercf\"><span>æ¦‚ç‡UserCF</span></a></h3>\n<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šä½¿ç”¨æ¦‚ç‡æ¨¡å‹æè¿°ç”¨æˆ·ç›¸ä¼¼æ€§</p>\n<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>\n<ul>\n<li>æ›´å¥½çš„ä¸ç¡®å®šæ€§å¤„ç†</li>\n<li>æ”¯æŒè´å¶æ–¯æ¨ç†</li>\n<li>æ˜“äºèå…¥å…¶ä»–æ¦‚ç‡æ¨¡å‹</li>\n</ul>\n<h2 id=\"âš¡-å®æ—¶æ¨èä¼˜åŒ–\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#âš¡-å®æ—¶æ¨èä¼˜åŒ–\"><span>âš¡ å®æ—¶æ¨èä¼˜åŒ–</span></a></h2>\n<h3 id=\"usercfæ¨èç³»ç»Ÿæ¶æ„å›¾\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfæ¨èç³»ç»Ÿæ¶æ„å›¾\"><span>UserCFæ¨èç³»ç»Ÿæ¶æ„å›¾</span></a></h3>\n<Mermaid id=\"mermaid-445\" code=\"eJxVkctOwkAUhvc8xUn3xBcwGKFc3eqKsFCjcWFigiYuxMQQoFWggC2IcmlKwKAJt4iBSNF3Icx0utJHsDNtEGcxiznf+c//nzk+Pbs8PNmPX8Au7wLrbEe5H7XUBkPpYnFCBhM8SnIxcLs94L2ySvefYOgy6lW3uGvW4KW1BLeopwGV5stpj0uAL8otnjQwamMsdciXgmpNLvaPbuQA119XDTydquRh7/wo7gtgqUvyRaSXsSw5fezimQ0/ZeU7wOUhzveRkEFtwaH8DAjQ6ZXvacEyMF3qOvp4Jn3N6D+sawUYGmRpO2AmZ2iUNm9ucfbFSsuIICNClJAGQAYpJGbMVgq/Z9d1QowKM09ZsJ0biorFokOFGRChwGp32FpMZegAEQb4/iR3qP9H5v9tZszUpV5FucrmQXzDYy0pZXmw4zgvsohaTVMo2KLs0Y5PxiqZz1FDIJrmfCHv+gXo+99x\"></Mermaid><h3 id=\"å¢é‡æ›´æ–°ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#å¢é‡æ›´æ–°ç­–ç•¥\"><span>å¢é‡æ›´æ–°ç­–ç•¥</span></a></h3>\n<ol>\n<li><strong>ç›¸ä¼¼åº¦çŸ©é˜µå¢é‡æ›´æ–°</strong>ï¼šåªæ›´æ–°å‘ç”Ÿå˜åŒ–çš„ç”¨æˆ·ç›¸ä¼¼åº¦</li>\n<li><strong>æ»‘åŠ¨çª—å£</strong>ï¼šåªè€ƒè™‘æœ€è¿‘Nå¤©çš„ç”¨æˆ·è¡Œä¸º</li>\n<li><strong>å¼‚æ­¥è®¡ç®—</strong>ï¼šåå°å¼‚æ­¥æ›´æ–°ç›¸ä¼¼åº¦çŸ©é˜µ</li>\n</ol>\n<h2 id=\"ğŸ“Š-usercfä¸“å±è°ƒä¼˜ç­–ç•¥\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ“Š-usercfä¸“å±è°ƒä¼˜ç­–ç•¥\"><span>ğŸ“Š UserCFä¸“å±è°ƒä¼˜ç­–ç•¥</span></a></h2>\n<h3 id=\"usercfå…³é”®å‚æ•°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfå…³é”®å‚æ•°\"><span>UserCFå…³é”®å‚æ•°</span></a></h3>\n<p><strong>é‚»å±…é€‰æ‹©ç­–ç•¥</strong>ï¼š</p>\n<ul>\n<li><strong>Kå€¼é€‰æ‹©</strong>ï¼šç¤¾äº¤åœºæ™¯K=20-30ï¼Œç”µå•†åœºæ™¯K=10-20</li>\n<li><strong>ç›¸ä¼¼åº¦é˜ˆå€¼</strong>ï¼šè®¾ç½®æœ€å°ç›¸ä¼¼åº¦0.1-0.3ï¼Œè¿‡æ»¤å™ªéŸ³ç”¨æˆ·</li>\n<li><strong>æ´»è·ƒåº¦æƒé‡</strong>ï¼šé«˜æ´»è·ƒç”¨æˆ·ç»™äºˆæ›´é«˜æƒé‡</li>\n</ul>\n<h3 id=\"usercfç‰¹æœ‰ä¼˜åŒ–\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#usercfç‰¹æœ‰ä¼˜åŒ–\"><span>UserCFç‰¹æœ‰ä¼˜åŒ–</span></a></h3>\n<p><strong>ç¤¾äº¤å¢å¼º</strong>ï¼š</p>\n<ul>\n<li>ç»“åˆç”¨æˆ·ç¤¾äº¤å…³ç³»å›¾</li>\n<li>ä¿¡ä»»åº¦ä¼ æ’­ç®—æ³•</li>\n<li>ç¤¾åŒºå‘ç°å¢å¼ºç›¸ä¼¼åº¦</li>\n</ul>\n<p><strong>æ—¶åºä¼˜åŒ–</strong>ï¼š</p>\n<ul>\n<li>ç”¨æˆ·å…´è¶£å˜åŒ–å»ºæ¨¡</li>\n<li>å­£èŠ‚æ€§åå¥½è€ƒè™‘</li>\n<li>çŸ­æœŸå’Œé•¿æœŸå…´è¶£å¹³è¡¡</li>\n</ul>\n<h2 id=\"ğŸ’¡-è¡Œä¸šåº”ç”¨æ¡ˆä¾‹\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ’¡-è¡Œä¸šåº”ç”¨æ¡ˆä¾‹\"><span>ğŸ’¡ è¡Œä¸šåº”ç”¨æ¡ˆä¾‹</span></a></h2>\n<h3 id=\"amazon-customers-who-bought-this-item-also-bought\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#amazon-customers-who-bought-this-item-also-bought\"><span>Amazon &quot;Customers who bought this item also bought&quot;</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>åŸºäºè´­ä¹°è¡Œä¸ºçš„UserCF</li>\n<li>ç»“åˆå•†å“ç±»åˆ«çº¦æŸ</li>\n<li>è€ƒè™‘è´­ä¹°æ—¶é—´è¡°å‡</li>\n</ul>\n<h3 id=\"netflix-ç”¨æˆ·ç¾¤ä½“æ¨è\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#netflix-ç”¨æˆ·ç¾¤ä½“æ¨è\"><span>Netflix ç”¨æˆ·ç¾¤ä½“æ¨è</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>ç»“åˆè§‚çœ‹æ—¶é•¿ä¿¡æ¯</li>\n<li>è€ƒè™‘ç”¨æˆ·äººå£ç»Ÿè®¡å­¦ç›¸ä¼¼æ€§</li>\n<li>å¤šå±‚æ¬¡ç›¸ä¼¼åº¦èåˆ</li>\n</ul>\n<h3 id=\"spotify-éŸ³ä¹å‘ç°\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#spotify-éŸ³ä¹å‘ç°\"><span>Spotify éŸ³ä¹å‘ç°</span></a></h3>\n<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>åŸºäºæ’­æ”¾è¡Œä¸ºçš„UserCF</li>\n<li>ç»“åˆéŸ³ä¹ç‰¹å¾ç›¸ä¼¼åº¦</li>\n<li>è€ƒè™‘å¬æ­Œæƒ…å¢ƒå’Œæ—¶é—´</li>\n</ul>\n<h2 id=\"ğŸ”®-usercfçš„å‘å±•è¶‹åŠ¿\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ğŸ”®-usercfçš„å‘å±•è¶‹åŠ¿\"><span>ğŸ”® UserCFçš„å‘å±•è¶‹åŠ¿</span></a></h2>\n<h3 id=\"æŠ€æœ¯å‘å±•æ–¹å‘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#æŠ€æœ¯å‘å±•æ–¹å‘\"><span>æŠ€æœ¯å‘å±•æ–¹å‘</span></a></h3>\n<ol>\n<li><strong>æ·±åº¦å­¦ä¹ èåˆ</strong>ï¼šNeural Collaborative Filtering</li>\n<li><strong>å›¾ç¥ç»ç½‘ç»œ</strong>ï¼šå»ºæ¨¡å¤æ‚ç”¨æˆ·å…³ç³»</li>\n<li><strong>è”é‚¦å­¦ä¹ </strong>ï¼šéšç§ä¿æŠ¤ä¸‹çš„ååŒè¿‡æ»¤</li>\n<li><strong>å¼ºåŒ–å­¦ä¹ </strong>ï¼šåŠ¨æ€è°ƒæ•´æ¨èç­–ç•¥</li>\n</ol>\n<h3 id=\"åº”ç”¨æ‹“å±•é¢†åŸŸ\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#åº”ç”¨æ‹“å±•é¢†åŸŸ\"><span>åº”ç”¨æ‹“å±•é¢†åŸŸ</span></a></h3>\n<ol>\n<li><strong>è·¨åŸŸæ¨è</strong>ï¼šåˆ©ç”¨å¤šå¹³å°ç”¨æˆ·è¡Œä¸º</li>\n<li><strong>ç¾¤ç»„æ¨è</strong>ï¼šä¸ºç”¨æˆ·ç¾¤ä½“ç”Ÿæˆæ¨è</li>\n<li><strong>æƒ…å¢ƒæ„ŸçŸ¥</strong>ï¼šç»“åˆæ—¶é—´ã€åœ°ç‚¹ã€æƒ…ç»ªç­‰æƒ…å¢ƒ</li>\n<li><strong>å¤šç›®æ ‡ä¼˜åŒ–</strong>ï¼šå¹³è¡¡å‡†ç¡®æ€§ã€å¤šæ ·æ€§ã€å…¬å¹³æ€§</li>\n</ol>\n<hr>\n<blockquote>\n<p>UserCFçš„ç²¾é«“åœ¨äºå‘ç°å¿—è¶£ç›¸æŠ•çš„ç¾¤ä½“ï¼Œè®©æ¨èä¸å†å­¤ç«‹ï¼Œè€Œæ˜¯å……æ»¡äººæƒ…å‘³çš„æ™ºèƒ½é€‰æ‹©</p>\n</blockquote>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼ˆUser-based Collaborative Filtering, UserCFï¼‰æ˜¯ååŒè¿‡æ»¤ç®—æ³•å®¶æ—ä¸­çš„ç»å…¸æˆå‘˜ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯ **\"å‘Šè¯‰æˆ‘ä½ çš„æœ‹å‹æ˜¯è°ï¼Œæˆ‘å°±çŸ¥é“ä½ æ˜¯ä»€ä¹ˆæ ·çš„äºº\"**ã€‚é€šè¿‡å¯»æ‰¾å…´è¶£ç›¸ä¼¼çš„ç”¨æˆ·ç¾¤ä½“ï¼Œä¸ºç›®æ ‡ç”¨æˆ·æ¨èå…¶é‚»å±…ç”¨æˆ·å–œæ¬¢ä½†ä»–å°šæœªæ¥è§¦çš„ç‰©å“ã€‚\n\n## ğŸ¯ UserCFçš„æ ¸å¿ƒæ€æƒ³\n\n::: tip é‚»é‡Œæ•ˆåº”\nUserCFåŸºäºç¤¾ä¼šå­¦ä¸­çš„\"é‚»é‡Œæ•ˆåº”\"ç†è®ºï¼šç›¸ä¼¼çš„äººå¾€å¾€æœ‰ç›¸ä¼¼çš„è¡Œä¸ºæ¨¡å¼å’Œåå¥½ã€‚\n:::\n\n### ç®—æ³•ç›´è§‰\n\næƒ³è±¡ä½ åœ¨å¯»æ‰¾ä¸€éƒ¨å¥½ç”µå½±ï¼Œä½ å¯èƒ½ä¼šï¼š\n1. è¯¢é—®ä¸ä½ å“å‘³ç›¸ä¼¼çš„æœ‹å‹\n2. å‚è€ƒä»–ä»¬æœ€è¿‘è§‚çœ‹å¹¶æ¨èçš„ç”µå½±\n3. ä»ä¸­é€‰æ‹©ä½ è¿˜æ²¡çœ‹è¿‡çš„ç”µå½±\n\nUserCFå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„æ•°å­¦åŒ–å®ç°ï¼\n\n### æ•°å­¦è¡¨è¾¾\n\nç»™å®šç”¨æˆ·-ç‰©å“è¯„åˆ†çŸ©é˜µ $R_{m \\times n}$ï¼ŒUserCFçš„ç›®æ ‡æ˜¯é¢„æµ‹ç”¨æˆ· $u$ å¯¹ç‰©å“ $i$ çš„è¯„åˆ† $\\hat{r}_{u,i}$ï¼š\n\n$$\\hat{r}_{u,i} = \\bar{r_u} + \\frac{\\sum_{v \\in N_k(u)} sim(u,v) \\cdot (r_{v,i} - \\bar{r_v})}{\\sum_{v \\in N_k(u)} |sim(u,v)|}$$\n\nå…¶ä¸­ï¼š\n- $R_{m \\times n}$ æ˜¯ $m$ ä¸ªç”¨æˆ·å¯¹ $n$ ä¸ªç‰©å“çš„è¯„åˆ†çŸ©é˜µ\n- $\\hat{r}_{u,i}$ æ˜¯é¢„æµ‹çš„ç”¨æˆ· $u$ å¯¹ç‰©å“ $i$ çš„è¯„åˆ†\n- $\\bar{r_u}$ æ˜¯ç”¨æˆ· $u$ çš„å¹³å‡è¯„åˆ†\n- $\\bar{r_v}$ æ˜¯ç”¨æˆ· $v$ çš„å¹³å‡è¯„åˆ†\n- $r_{v,i}$ æ˜¯ç”¨æˆ· $v$ å¯¹ç‰©å“ $i$ çš„å®é™…è¯„åˆ†\n- $N_k(u)$ æ˜¯ä¸ç”¨æˆ· $u$ æœ€ç›¸ä¼¼çš„ $k$ ä¸ªç”¨æˆ·é›†åˆ\n- $sim(u,v)$ æ˜¯ç”¨æˆ· $u$ å’Œ $v$ ä¹‹é—´çš„ç›¸ä¼¼åº¦\n- $|sim(u,v)|$ è¡¨ç¤ºç›¸ä¼¼åº¦çš„ç»å¯¹å€¼ï¼ˆç”¨äºå½’ä¸€åŒ–ï¼‰\n\n## ğŸ“ UserCFçš„æ ¸å¿ƒç®—æ³•\n\n::: tip å‚è€ƒååŒè¿‡æ»¤æ€»è§ˆ\nè¯¦ç»†çš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•è¯·å‚è€ƒ [ååŒè¿‡æ»¤æ€»è§ˆ](./2.collaborative_filtering.md#ç›¸ä¼¼åº¦åº¦é‡æ–¹æ³•è¯¦ç»†å¯¹æ¯”) ä¸­çš„å®Œæ•´å¯¹æ¯”åˆ†æã€‚\n:::\n\nUserCFçš„å…³é”®åœ¨äºå‡†ç¡®è®¡ç®—ç”¨æˆ·é—´ç›¸ä¼¼åº¦ï¼Œæ¨èé€‰æ‹©ï¼š\n- **æ˜¾å¼è¯„åˆ†åœºæ™¯**ï¼šä¼˜å…ˆä½¿ç”¨çš®å°”é€Šç›¸å…³ç³»æ•°\n- **éšå¼åé¦ˆåœºæ™¯**ï¼šä¼˜å…ˆä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦\n- **è¯„åˆ†åˆ†å¸ƒä¸å‡**ï¼šè€ƒè™‘è°ƒæ•´ä½™å¼¦ç›¸ä¼¼åº¦\n\n## ğŸ’» UserCFç®—æ³•å®ç°\n\n::: details UserCFæ ¸å¿ƒç®—æ³•æ¡†æ¶\n```python\nimport numpy as np\nfrom scipy.spatial.distance import cosine\nfrom scipy.stats import pearsonr\n\nclass UserBasedCF:\n    def __init__(self, similarity_method='pearson', k_neighbors=20):\n        self.similarity_method = similarity_method\n        self.k_neighbors = k_neighbors\n        self.user_similarity_matrix = None\n        \n    def fit(self, user_item_matrix):\n        \"\"\"è®­ç»ƒUserCFæ¨¡å‹\"\"\"\n        self.user_item_matrix = user_item_matrix.copy()\n        self.user_mean_ratings = np.array([\n            np.mean(row[row > 0]) if np.sum(row > 0) > 0 else 0 \n            for row in user_item_matrix\n        ])\n        \n        # è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ\n        self.user_similarity_matrix = self._compute_user_similarity()\n        \n    def predict_rating(self, user_id, item_id):\n        \"\"\"é¢„æµ‹ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†\"\"\"\n        user_similarities = self.user_similarity_matrix[user_id]\n        item_raters = np.where(self.user_item_matrix[:, item_id] > 0)[0]\n        \n        if len(item_raters) == 0:\n            return self.user_mean_ratings[user_id]\n            \n        # é€‰æ‹©æœ€ç›¸ä¼¼çš„kä¸ªé‚»å±…\n        similarities = user_similarities[item_raters]\n        neighbor_indices = np.argsort(similarities)[-self.k_neighbors:]\n        \n        # è®¡ç®—åŠ æƒå¹³å‡é¢„æµ‹\n        neighbor_similarities = similarities[neighbor_indices]\n        neighbor_ratings = self.user_item_matrix[item_raters[neighbor_indices], item_id]\n        neighbor_means = self.user_mean_ratings[item_raters[neighbor_indices]]\n        \n        valid_mask = neighbor_similarities > 0\n        if np.sum(valid_mask) == 0:\n            return self.user_mean_ratings[user_id]\n            \n        numerator = np.sum(\n            neighbor_similarities[valid_mask] * \n            (neighbor_ratings[valid_mask] - neighbor_means[valid_mask])\n        )\n        denominator = np.sum(np.abs(neighbor_similarities[valid_mask]))\n        \n        return self.user_mean_ratings[user_id] + numerator / denominator\n        \n    def recommend_items(self, user_id, n_recommendations=10):\n        \"\"\"ä¸ºç”¨æˆ·æ¨èç‰©å“\"\"\"\n        user_ratings = self.user_item_matrix[user_id]\n        candidate_items = np.where(user_ratings == 0)[0]\n        \n        predictions = [(item_id, self.predict_rating(user_id, item_id)) \n                      for item_id in candidate_items]\n        predictions.sort(key=lambda x: x[1], reverse=True)\n        \n        return predictions[:n_recommendations]\n```\n:::\n\n## ğŸª UserCFçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹\n\n### é€‚ç”¨åœºæ™¯åˆ†æ\n\n| åº”ç”¨é¢†åŸŸ | é€‚ç”¨åŸå›  | æ³¨æ„äº‹é¡¹ |\n|----------|----------|----------|\n| **ç¤¾äº¤åª’ä½“** | ç”¨æˆ·å…´è¶£ç›¸ä¼¼åº¦é«˜ | æ³¨æ„ç”¨æˆ·éšç§ä¿æŠ¤ |\n| **åœ¨çº¿æ•™è‚²** | å­¦ä¹ è·¯å¾„ç›¸ä¼¼ | è€ƒè™‘å­¦ä¹ èƒ½åŠ›å·®å¼‚ |\n| **æ–°é—»æ¨è** | å…³æ³¨çƒ­ç‚¹ç›¸ä¼¼ | éœ€è¦æ—¶æ•ˆæ€§å¤„ç† |\n| **éŸ³ä¹æ¨è** | å“å‘³ç¾¤ä½“æ€§æ˜æ˜¾ | è€ƒè™‘æƒ…å¢ƒå› ç´  |\n\n### UserCFçš„æŠ€æœ¯ç‰¹ç‚¹\n\n**ä¼˜åŠ¿ç‰¹ç‚¹**ï¼š\n- **ç¤¾ä¼šåŒ–æ¨è**ï¼šåæ˜ ç¾¤ä½“æ™ºæ…§å’Œç¤¾ä¼šåŒ–å…´è¶£\n- **æ–°é¢–æ€§å¥½**ï¼šèƒ½æ¨èç”¨æˆ·æ„æƒ³ä¸åˆ°çš„å†…å®¹\n- **è§£é‡Šæ€§å¼º**ï¼šå¯ä»¥è§£é‡Šä¸º\"å–œæ¬¢ç±»ä¼¼å†…å®¹çš„ç”¨æˆ·è¿˜å–œæ¬¢...\"\n- **æ— å†…å®¹ä¾èµ–**ï¼šä¸éœ€è¦ç‰©å“å†…å®¹ç‰¹å¾\n\n**åŠ£åŠ¿æŒ‘æˆ˜**ï¼š\n- **å®æ—¶æ€§å·®**ï¼šç”¨æˆ·ç›¸ä¼¼åº¦éœ€è¦é¢‘ç¹é‡è®¡ç®—\n- **ç¨€ç–æ€§æ•æ„Ÿ**ï¼šæ–°ç”¨æˆ·å’Œæ´»è·ƒåº¦ä½çš„ç”¨æˆ·æ¨èæ•ˆæœå·®\n- **å¯æ‰©å±•æ€§é—®é¢˜**ï¼šç”¨æˆ·æ•°é‡å¢é•¿æ—¶è®¡ç®—å¤æ‚åº¦æ¿€å¢\n- **æµè¡Œåè§**ï¼šå€¾å‘äºæ¨èçƒ­é—¨å†…å®¹\n\n## ğŸš€ UserCFçš„ä¼˜åŒ–ç­–ç•¥\n\n### æ€§èƒ½ä¼˜åŒ–æ–¹æ³•\n\n1. **é¢„è®¡ç®—ä¼˜åŒ–**ï¼š\n   - ç¦»çº¿è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µ\n   - é¢„è®¡ç®—æ¯ä¸ªç”¨æˆ·çš„TOP-Ké‚»å±…\n   - ä½¿ç”¨å¢é‡æ›´æ–°ç­–ç•¥\n\n2. **è¿‘ä¼¼è®¡ç®—**ï¼š\n   - **LSH (Locality Sensitive Hashing)**ï¼šå¿«é€Ÿæ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·\n   - **éšæœºé‡‡æ ·**ï¼šé™ä½è®¡ç®—å¤æ‚åº¦\n   - **èšç±»é¢„å¤„ç†**ï¼šå…ˆèšç±»å†åœ¨ç±»å†…è®¡ç®—ç›¸ä¼¼åº¦\n\n3. **ç¨€ç–çŸ©é˜µä¼˜åŒ–**ï¼š\n   - ä½¿ç”¨ scipy.sparse å­˜å‚¨ç¨€ç–çŸ©é˜µ\n   - åªå­˜å‚¨ç›¸ä¼¼åº¦å¤§äºé˜ˆå€¼çš„ç”¨æˆ·å¯¹\n   - é‡‡ç”¨åˆ†å—è®¡ç®—ç­–ç•¥\n\n### ç®—æ³•æ”¹è¿›æ–¹å‘\n\n1. **æ—¶é—´è¡°å‡**ï¼š\n   $$sim_{time}(u,v) = sim(u,v) \\cdot \\exp(-\\lambda \\cdot \\Delta t)$$\n   \n   å…¶ä¸­ï¼š\n   - $sim(u,v)$ æ˜¯åŸºç¡€ç›¸ä¼¼åº¦\n   - $\\lambda$ æ˜¯æ—¶é—´è¡°å‡ç³»æ•°ï¼ˆæ§åˆ¶è¡°å‡å¼ºåº¦ï¼‰\n   - $\\Delta t$ æ˜¯æ—¶é—´é—´éš”ï¼ˆå½“å‰æ—¶é—´ä¸äº¤äº’æ—¶é—´çš„å·®å€¼ï¼‰\n   \n2. **ç½®ä¿¡åº¦åŠ æƒ**ï¼š\n   æ ¹æ®å…±åŒè¯„åˆ†ç‰©å“æ•°é‡è°ƒæ•´ç›¸ä¼¼åº¦æƒé‡\n   \n3. **å¤šçº§é‚»å±…**ï¼š\n   ä¸ä»…è€ƒè™‘ç›´æ¥é‚»å±…ï¼Œè¿˜è€ƒè™‘é‚»å±…çš„é‚»å±…\n\n## ğŸ”„ UserCFçš„å˜ç§ç®—æ³•\n\n### åŸºäºèšç±»çš„UserCF\n\n**æ ¸å¿ƒæ€æƒ³**ï¼šå…ˆå°†ç”¨æˆ·èšç±»ï¼Œå†åœ¨ç±»å†…è¿›è¡ŒååŒè¿‡æ»¤\n\n**ä¼˜åŠ¿**ï¼š\n- é™ä½è®¡ç®—å¤æ‚åº¦ \n- æé«˜æ¨èå¤šæ ·æ€§\n- æ›´å¥½å¤„ç†æ•°æ®ç¨€ç–æ€§\n\n### åŸºäºä¿¡ä»»çš„UserCF\n\n**æ ¸å¿ƒæ€æƒ³**ï¼šç»“åˆç”¨æˆ·ä¹‹é—´çš„ä¿¡ä»»å…³ç³»\n\n**åº”ç”¨åœºæ™¯**ï¼š\n- ç¤¾äº¤ç½‘ç»œæ¨è\n- ä¸“å®¶æ¨èç³»ç»Ÿ\n- å£ç¢‘è¥é”€å¹³å°\n\n### æ¦‚ç‡UserCF\n\n**æ ¸å¿ƒæ€æƒ³**ï¼šä½¿ç”¨æ¦‚ç‡æ¨¡å‹æè¿°ç”¨æˆ·ç›¸ä¼¼æ€§\n\n**ä¼˜åŠ¿**ï¼š\n- æ›´å¥½çš„ä¸ç¡®å®šæ€§å¤„ç†\n- æ”¯æŒè´å¶æ–¯æ¨ç†\n- æ˜“äºèå…¥å…¶ä»–æ¦‚ç‡æ¨¡å‹\n\n## âš¡ å®æ—¶æ¨èä¼˜åŒ–\n\n### UserCFæ¨èç³»ç»Ÿæ¶æ„å›¾\n\n```mermaid\nflowchart TD\n    A[\"ğŸ‘¤ ç”¨æˆ·è¯·æ±‚\"] --> B{\"ğŸ’¾ ç¼“å­˜?\"}\n    B -->|\"âœ… å‘½ä¸­\"| C[\"âš¡ ç›´æ¥è¿”å›\"]\n    B -->|\"âŒ æœªå‘½ä¸­\"| D[\"ğŸ” UserCFæ¨èå¼•æ“\"]\n    \n    D --> E[\"ğŸ“Š æ•°æ®å‡†å¤‡\"]\n    E --> F[\"âš–ï¸ ç›¸ä¼¼åº¦è®¡ç®—\"]\n    \n    F --> G[\"ğŸ‘¥ é‚»å±…é€‰æ‹©\"] \n    G --> H[\"ğŸ¯ è¯„åˆ†é¢„æµ‹\"]\n    \n    H --> I[\"ğŸ“‹ æ¨èç”Ÿæˆ\"]\n    I --> J[\"ğŸ’¾ ç¼“å­˜æ›´æ–°\"]\n    J --> C\n    \n    K[\"âš™ï¸ ç³»ç»Ÿä¼˜åŒ–<br/>ğŸ”„é¢„è®¡ç®—<br/>ğŸ“ˆå¢é‡æ›´æ–°<br/>âš–ï¸è´Ÿè½½å‡è¡¡\"] --> D\n```\n\n### å¢é‡æ›´æ–°ç­–ç•¥\n\n1. **ç›¸ä¼¼åº¦çŸ©é˜µå¢é‡æ›´æ–°**ï¼šåªæ›´æ–°å‘ç”Ÿå˜åŒ–çš„ç”¨æˆ·ç›¸ä¼¼åº¦\n2. **æ»‘åŠ¨çª—å£**ï¼šåªè€ƒè™‘æœ€è¿‘Nå¤©çš„ç”¨æˆ·è¡Œä¸º\n3. **å¼‚æ­¥è®¡ç®—**ï¼šåå°å¼‚æ­¥æ›´æ–°ç›¸ä¼¼åº¦çŸ©é˜µ\n\n## ğŸ“Š UserCFä¸“å±è°ƒä¼˜ç­–ç•¥\n\n### UserCFå…³é”®å‚æ•°\n\n**é‚»å±…é€‰æ‹©ç­–ç•¥**ï¼š\n- **Kå€¼é€‰æ‹©**ï¼šç¤¾äº¤åœºæ™¯K=20-30ï¼Œç”µå•†åœºæ™¯K=10-20\n- **ç›¸ä¼¼åº¦é˜ˆå€¼**ï¼šè®¾ç½®æœ€å°ç›¸ä¼¼åº¦0.1-0.3ï¼Œè¿‡æ»¤å™ªéŸ³ç”¨æˆ·\n- **æ´»è·ƒåº¦æƒé‡**ï¼šé«˜æ´»è·ƒç”¨æˆ·ç»™äºˆæ›´é«˜æƒé‡\n\n### UserCFç‰¹æœ‰ä¼˜åŒ–\n\n**ç¤¾äº¤å¢å¼º**ï¼š\n- ç»“åˆç”¨æˆ·ç¤¾äº¤å…³ç³»å›¾\n- ä¿¡ä»»åº¦ä¼ æ’­ç®—æ³•\n- ç¤¾åŒºå‘ç°å¢å¼ºç›¸ä¼¼åº¦\n\n**æ—¶åºä¼˜åŒ–**ï¼š\n- ç”¨æˆ·å…´è¶£å˜åŒ–å»ºæ¨¡\n- å­£èŠ‚æ€§åå¥½è€ƒè™‘\n- çŸ­æœŸå’Œé•¿æœŸå…´è¶£å¹³è¡¡\n\n## ğŸ’¡ è¡Œä¸šåº”ç”¨æ¡ˆä¾‹\n\n### Amazon \"Customers who bought this item also bought\"\n\n**æŠ€æœ¯ç‰¹ç‚¹**ï¼š\n- åŸºäºè´­ä¹°è¡Œä¸ºçš„UserCF\n- ç»“åˆå•†å“ç±»åˆ«çº¦æŸ\n- è€ƒè™‘è´­ä¹°æ—¶é—´è¡°å‡\n\n### Netflix ç”¨æˆ·ç¾¤ä½“æ¨è\n\n**æŠ€æœ¯ç‰¹ç‚¹**ï¼š\n- ç»“åˆè§‚çœ‹æ—¶é•¿ä¿¡æ¯\n- è€ƒè™‘ç”¨æˆ·äººå£ç»Ÿè®¡å­¦ç›¸ä¼¼æ€§\n- å¤šå±‚æ¬¡ç›¸ä¼¼åº¦èåˆ\n\n### Spotify éŸ³ä¹å‘ç°\n\n**æŠ€æœ¯ç‰¹ç‚¹**ï¼š\n- åŸºäºæ’­æ”¾è¡Œä¸ºçš„UserCF\n- ç»“åˆéŸ³ä¹ç‰¹å¾ç›¸ä¼¼åº¦\n- è€ƒè™‘å¬æ­Œæƒ…å¢ƒå’Œæ—¶é—´\n\n## ğŸ”® UserCFçš„å‘å±•è¶‹åŠ¿\n\n### æŠ€æœ¯å‘å±•æ–¹å‘\n\n1. **æ·±åº¦å­¦ä¹ èåˆ**ï¼šNeural Collaborative Filtering\n2. **å›¾ç¥ç»ç½‘ç»œ**ï¼šå»ºæ¨¡å¤æ‚ç”¨æˆ·å…³ç³»\n3. **è”é‚¦å­¦ä¹ **ï¼šéšç§ä¿æŠ¤ä¸‹çš„ååŒè¿‡æ»¤\n4. **å¼ºåŒ–å­¦ä¹ **ï¼šåŠ¨æ€è°ƒæ•´æ¨èç­–ç•¥\n\n### åº”ç”¨æ‹“å±•é¢†åŸŸ\n\n1. **è·¨åŸŸæ¨è**ï¼šåˆ©ç”¨å¤šå¹³å°ç”¨æˆ·è¡Œä¸º\n2. **ç¾¤ç»„æ¨è**ï¼šä¸ºç”¨æˆ·ç¾¤ä½“ç”Ÿæˆæ¨è\n3. **æƒ…å¢ƒæ„ŸçŸ¥**ï¼šç»“åˆæ—¶é—´ã€åœ°ç‚¹ã€æƒ…ç»ªç­‰æƒ…å¢ƒ\n4. **å¤šç›®æ ‡ä¼˜åŒ–**ï¼šå¹³è¡¡å‡†ç¡®æ€§ã€å¤šæ ·æ€§ã€å…¬å¹³æ€§\n\n---\n\n>UserCFçš„ç²¾é«“åœ¨äºå‘ç°å¿—è¶£ç›¸æŠ•çš„ç¾¤ä½“ï¼Œè®©æ¨èä¸å†å­¤ç«‹ï¼Œè€Œæ˜¯å……æ»¡äººæƒ…å‘³çš„æ™ºèƒ½é€‰æ‹©","excerpt":"","includedFiles":[],"tasklistId":0,"title":"","headers":[{"level":2,"title":"ğŸ¯ UserCFçš„æ ¸å¿ƒæ€æƒ³","slug":"ğŸ¯-usercfçš„æ ¸å¿ƒæ€æƒ³","link":"#ğŸ¯-usercfçš„æ ¸å¿ƒæ€æƒ³","children":[{"level":3,"title":"ç®—æ³•ç›´è§‰","slug":"ç®—æ³•ç›´è§‰","link":"#ç®—æ³•ç›´è§‰","children":[]},{"level":3,"title":"æ•°å­¦è¡¨è¾¾","slug":"æ•°å­¦è¡¨è¾¾","link":"#æ•°å­¦è¡¨è¾¾","children":[]}]},{"level":2,"title":"ğŸ“ UserCFçš„æ ¸å¿ƒç®—æ³•","slug":"ğŸ“-usercfçš„æ ¸å¿ƒç®—æ³•","link":"#ğŸ“-usercfçš„æ ¸å¿ƒç®—æ³•","children":[]},{"level":2,"title":"ğŸ’» UserCFç®—æ³•å®ç°","slug":"ğŸ’»-usercfç®—æ³•å®ç°","link":"#ğŸ’»-usercfç®—æ³•å®ç°","children":[]},{"level":2,"title":"ğŸª UserCFçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹","slug":"ğŸª-usercfçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹","link":"#ğŸª-usercfçš„åº”ç”¨åœºæ™¯ä¸ç‰¹ç‚¹","children":[{"level":3,"title":"é€‚ç”¨åœºæ™¯åˆ†æ","slug":"é€‚ç”¨åœºæ™¯åˆ†æ","link":"#é€‚ç”¨åœºæ™¯åˆ†æ","children":[]},{"level":3,"title":"UserCFçš„æŠ€æœ¯ç‰¹ç‚¹","slug":"usercfçš„æŠ€æœ¯ç‰¹ç‚¹","link":"#usercfçš„æŠ€æœ¯ç‰¹ç‚¹","children":[]}]},{"level":2,"title":"ğŸš€ UserCFçš„ä¼˜åŒ–ç­–ç•¥","slug":"ğŸš€-usercfçš„ä¼˜åŒ–ç­–ç•¥","link":"#ğŸš€-usercfçš„ä¼˜åŒ–ç­–ç•¥","children":[{"level":3,"title":"æ€§èƒ½ä¼˜åŒ–æ–¹æ³•","slug":"æ€§èƒ½ä¼˜åŒ–æ–¹æ³•","link":"#æ€§èƒ½ä¼˜åŒ–æ–¹æ³•","children":[]},{"level":3,"title":"ç®—æ³•æ”¹è¿›æ–¹å‘","slug":"ç®—æ³•æ”¹è¿›æ–¹å‘","link":"#ç®—æ³•æ”¹è¿›æ–¹å‘","children":[]}]},{"level":2,"title":"ğŸ”„ UserCFçš„å˜ç§ç®—æ³•","slug":"ğŸ”„-usercfçš„å˜ç§ç®—æ³•","link":"#ğŸ”„-usercfçš„å˜ç§ç®—æ³•","children":[{"level":3,"title":"åŸºäºèšç±»çš„UserCF","slug":"åŸºäºèšç±»çš„usercf","link":"#åŸºäºèšç±»çš„usercf","children":[]},{"level":3,"title":"åŸºäºä¿¡ä»»çš„UserCF","slug":"åŸºäºä¿¡ä»»çš„usercf","link":"#åŸºäºä¿¡ä»»çš„usercf","children":[]},{"level":3,"title":"æ¦‚ç‡UserCF","slug":"æ¦‚ç‡usercf","link":"#æ¦‚ç‡usercf","children":[]}]},{"level":2,"title":"âš¡ å®æ—¶æ¨èä¼˜åŒ–","slug":"âš¡-å®æ—¶æ¨èä¼˜åŒ–","link":"#âš¡-å®æ—¶æ¨èä¼˜åŒ–","children":[{"level":3,"title":"UserCFæ¨èç³»ç»Ÿæ¶æ„å›¾","slug":"usercfæ¨èç³»ç»Ÿæ¶æ„å›¾","link":"#usercfæ¨èç³»ç»Ÿæ¶æ„å›¾","children":[]},{"level":3,"title":"å¢é‡æ›´æ–°ç­–ç•¥","slug":"å¢é‡æ›´æ–°ç­–ç•¥","link":"#å¢é‡æ›´æ–°ç­–ç•¥","children":[]}]},{"level":2,"title":"ğŸ“Š UserCFä¸“å±è°ƒä¼˜ç­–ç•¥","slug":"ğŸ“Š-usercfä¸“å±è°ƒä¼˜ç­–ç•¥","link":"#ğŸ“Š-usercfä¸“å±è°ƒä¼˜ç­–ç•¥","children":[{"level":3,"title":"UserCFå…³é”®å‚æ•°","slug":"usercfå…³é”®å‚æ•°","link":"#usercfå…³é”®å‚æ•°","children":[]},{"level":3,"title":"UserCFç‰¹æœ‰ä¼˜åŒ–","slug":"usercfç‰¹æœ‰ä¼˜åŒ–","link":"#usercfç‰¹æœ‰ä¼˜åŒ–","children":[]}]},{"level":2,"title":"ğŸ’¡ è¡Œä¸šåº”ç”¨æ¡ˆä¾‹","slug":"ğŸ’¡-è¡Œä¸šåº”ç”¨æ¡ˆä¾‹","link":"#ğŸ’¡-è¡Œä¸šåº”ç”¨æ¡ˆä¾‹","children":[{"level":3,"title":"Amazon \"Customers who bought this item also bought\"","slug":"amazon-customers-who-bought-this-item-also-bought","link":"#amazon-customers-who-bought-this-item-also-bought","children":[]},{"level":3,"title":"Netflix ç”¨æˆ·ç¾¤ä½“æ¨è","slug":"netflix-ç”¨æˆ·ç¾¤ä½“æ¨è","link":"#netflix-ç”¨æˆ·ç¾¤ä½“æ¨è","children":[]},{"level":3,"title":"Spotify éŸ³ä¹å‘ç°","slug":"spotify-éŸ³ä¹å‘ç°","link":"#spotify-éŸ³ä¹å‘ç°","children":[]}]},{"level":2,"title":"ğŸ”® UserCFçš„å‘å±•è¶‹åŠ¿","slug":"ğŸ”®-usercfçš„å‘å±•è¶‹åŠ¿","link":"#ğŸ”®-usercfçš„å‘å±•è¶‹åŠ¿","children":[{"level":3,"title":"æŠ€æœ¯å‘å±•æ–¹å‘","slug":"æŠ€æœ¯å‘å±•æ–¹å‘","link":"#æŠ€æœ¯å‘å±•æ–¹å‘","children":[]},{"level":3,"title":"åº”ç”¨æ‹“å±•é¢†åŸŸ","slug":"åº”ç”¨æ‹“å±•é¢†åŸŸ","link":"#åº”ç”¨æ‹“å±•é¢†åŸŸ","children":[]}]}],"links":[{"raw":"./2.collaborative_filtering.md#%E7%9B%B8%E4%BC%BC%E5%BA%A6%E5%BA%A6%E9%87%8F%E6%96%B9%E6%B3%95%E8%AF%A6%E7%BB%86%E5%AF%B9%E6%AF%94","relative":"zh/3.%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95--%E6%AF%94%E4%BD%A0%E6%9B%B4%E6%87%82%E4%BD%A0%E7%9A%84%E8%B4%B4%E5%BF%83%E5%B0%8F%E6%A3%89%E8%A2%84/1.%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95%E7%9A%84%E9%97%A8%E6%B4%BE/2.collaborative_filtering.md","absolute":"/search-rec-ads-cosmos-explorer/zh/3.%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95--%E6%AF%94%E4%BD%A0%E6%9B%B4%E6%87%82%E4%BD%A0%E7%9A%84%E8%B4%B4%E5%BF%83%E5%B0%8F%E6%A3%89%E8%A2%84/1.%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95%E7%9A%84%E9%97%A8%E6%B4%BE/2.collaborative_filtering.md"}]}}
